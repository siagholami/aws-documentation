Step 5: Run or Debug the API Locally
(Previous step: Step 4: Run or Debug the Function Locally)
Step 5.1: Run the API Locally
In this step, you use the IDE to have API Gateway run the Lambda function on the instance.


In the Lambda pane of the AWS Resources window, right-click the myDateTimeFunction Lambda icon, and then choose Run, Run APIGateway Local.
Note
You can also do this by choosing the Lambda (local) list on the run tab from the previous step, and then choosing API Gateway (local).


On the run tab, for Path, type / (a forward slash).


For Method, choose POST.


For Body, replace {} with the following, which sends this data as input to the API for processing.


{
     "option": "date",
     "period": "today"
   }


If the bug icon is green, choose it to turn it off. (It switches back to grey.)



Choose Run.


The Response pane displays the following response.


{
     "month": 4,
     "day": 12,
     "year": 2018
   }

Run the function several times with the following payloads to see what the Response pane displays.

```
   {
     "option": "date",
     "period": "yesterday"
   }
{
     "option": "date",
     "period": "tomorrow"
   }
{
     "option":"time"
   }
Displays an error. Must also specify a 'period' of 'yesterday', 'today', or 'tomorrow'.
   {
     "option":"date"
   }
Displays an error. Must specify an 'option' of 'date' or 'time'.
   {
     "option":"dates"
   }
   ```
Compare your results to the following.

Step 5.2: Debug the API Locally
In this step, you use the IDE to have API Gateway debug the Lambda function on the instance.


Ensure that the index.js file still has a breakpoint set on the line of code callback(null, response).


Ensure that the Watch Expressions area of the Debugger window is still watching event.option, event.period, sc, and response.body.


On the run tab from the previous step, choose the icon that looks like a bug. (It switches from grey to green.)


In the Body pane on the run tab, ensure the following is still visible.


{
     "option": "date",
     "period": "today"
   }

Choose Run.

Code execution pauses at the breakpoint, and the current values of event.option, event.period, sc, and response.body are displayed in the Watch Expressions area of the Debugger window.
You can also see these values in the code by hovering your mouse over option, period, sc, and response in the code. For response, expand Object {}, and then see the body value.

In the Debugger window, choose the blue Resume arrow to finish running the code.

Next Step
Step 6: Run the Function in Production