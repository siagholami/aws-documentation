Tutorial: Creating and Applying Amazon MQ Broker Configurations
A configuration contains all of the settings for your ActiveMQ broker, in XML format (similar to ActiveMQ's activemq.xml file). You can create a configuration before creating any brokers. You can then apply the configuration to one or more brokers. You can apply a configuration immediately or during a maintenance window.
Note
For an active/standby broker, if one of the broker instances undergoes maintenance, it takes Amazon MQ a short while to take the inactive instance out of service. This allows the healthy standby instance to become active and to begin accepting incoming communications.
For more information, see the following:
 Configuration
 Amazon MQ Broker Configuration Lifecycle
 Amazon MQ Broker Configuration Parameters
 Tutorial: Editing Amazon MQ Broker Configurations and Managing Configuration Revisions
The following example shows how you can create and apply an Amazon MQ broker configuration using the AWS Management Console.
Topics
 Step 1: Create a Configuration from Scratch
 Step 2: Create a New Configuration Revision
 Step 3: Apply a Configuration Revision to Your Broker
Step 1: Create a Configuration from Scratch


Sign in to the Amazon MQ console.


On the left, expand the navigation panel and choose Configurations.



On the Configurations page, choose Create configuration.


On the Create configuration page, in the Details section, type the Configuration name (for example, MyConfiguration) and select a Broker engine version.
Note
Currently, Amazon MQ supports only ActiveMQ broker engine versions 5.15.8, 5.15.6 and 5.15.0.


Choose Create configuration.


Step 2: Create a New Configuration Revision

From the configuration list, choose MyConfiguration.
Note
The first configuration revision is always created for you when Amazon MQ creates the configuration.

On the MyConfiguration page, the broker engine type and version that your new configuration revision uses (for example, Apache ActiveMQ 5.15.8) are displayed.


On the Configuration details tab, the configuration revision number, description, and broker configuration in XML format are displayed.
Note
Editing the current configuration creates a new configuration revision.



Choose Edit configuration and make changes to the XML configuration.


Choose Save.


The Save revision dialog box is displayed.


(Optional) Type A description of the changes in this revision.


Choose Save.


The new revision of the configuration is saved.
Important
The Amazon MQ console automatically sanitizes invalid and prohibited configuration parameters according to a schema. For more information and a full list of permitted XML parameters, see Amazon MQ Broker Configuration Parameters.
Making changes to a configuration does not apply the changes to the broker immediately. To apply your changes, you must wait for the next maintenance window or reboot the broker. For more information, see Amazon MQ Broker Configuration Lifecycle.
Currently, you can't delete a configuration.
Step 3: Apply a Configuration Revision to Your Broker


On the left, expand the navigation panel and choose Brokers.



From the broker list, select your broker (for example, MyBroker) and then choose Edit.


On the Edit MyBroker page, in the Configuration section, select a Configuration and a Revision and then choose Schedule Modifications.


In the Schedule broker modifications section, choose whether to apply modifications During the next scheduled maintenance window or Immediately.
Important
Your broker will be offline while it is being rebooted.


Choose Apply.


Your configuration revision is applied to your broker at the specified time.