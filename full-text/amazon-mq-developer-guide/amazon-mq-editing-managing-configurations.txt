Tutorial: Editing Amazon MQ Broker Configurations and Managing Configuration Revisions
A configuration contains all of the settings for your ActiveMQ broker, in XML format (similar to ActiveMQ's activemq.xml file). You can apply a configuration immediately or during a maintenance window.
Note
For an active/standby broker, if one of the broker instances undergoes maintenance, it takes Amazon MQ a short while to take the inactive instance out of service. This allows the healthy standby instance to become active and to begin accepting incoming communications.
To keep track of the changes you make to your configuration, you can create configuration revisions.
For more information, see the following:
 Configuration
 Amazon MQ Broker Configuration Lifecycle
 Amazon MQ Broker Configuration Parameters
 Tutorial: Creating and Applying Amazon MQ Broker Configurations
The following examples show how you can edit Amazon MQ broker configurations and manage broker configuration revisions using the AWS Management Console.
Topics
 To View a Previous Configuration Revision
 To Edit the Current Configuration Revision
 To Apply a Configuration Revision to Your Broker
 To Roll Back Your Broker to the Last Configuration Revision
To View a Previous Configuration Revision


Sign in to the Amazon MQ console.


From the broker list, select your broker (for example, MyBroker) and then choose Edit.


On the Edit MyBroker page, in the Configuration section, select a Configuration and a Revision and then choose Edit.
Note
Unless you select a configuration when you create a broker, the first configuration revision is always created for you when Amazon MQ creates the broker.


On the MyBroker page, the broker engine type and version that the configuration uses (for example, Apache ActiveMQ 5.15.8) are displayed.


Choose Revision history.


The configuration Revision number, Revision date, and Description are displayed for each revision.


Select a revision and choose View details.


The broker configuration in XML format is displayed.
To Edit the Current Configuration Revision


Sign in to the Amazon MQ console.


From the broker list, select your broker (for example, MyBroker) and then choose Edit.


On the MyBroker page, choose Edit.


On the Edit MyBroker page, in the Configuration section, select a Configuration and a Revision and then choose Edit.
Note
Unless you select a configuration when you create a broker, the first configuration revision is always created for you when Amazon MQ creates the broker.


On the MyBroker page, the broker engine type and version that the configuration uses (for example, Apache ActiveMQ 5.15.8) are displayed.


On the Configuration details tab, the configuration revision number, description, and broker configuration in XML format are displayed.
Note
Editing the current configuration creates a new configuration revision.



Choose Edit configuration and make changes to the XML configuration.


Choose Save.


The Save revision dialog box is displayed.


(Optional) Type A description of the changes in this revision.


Choose Save.


The new revision of the configuration is saved.
Important
The Amazon MQ console automatically sanitizes invalid and prohibited configuration parameters according to a schema. For more information and a full list of permitted XML parameters, see Amazon MQ Broker Configuration Parameters.
Making changes to a configuration does not apply the changes to the broker immediately. To apply your changes, you must wait for the next maintenance window or reboot the broker. For more information, see Amazon MQ Broker Configuration Lifecycle.
Currently, you can't delete a configuration.
To Apply a Configuration Revision to Your Broker


Sign in to the Amazon MQ console.


From the broker list, select your broker (for example, MyBroker) and then choose Edit.


On the Edit MyBroker page, in the Configuration section, select a Configuration and a Revision and then choose Schedule Modifications.


In the Schedule broker modifications section, choose whether to apply modifications During the next scheduled maintenance window or Immediately.
Important
Your broker will be offline while it is being rebooted.


Choose Apply.


Your configuration revision is applied to your broker at the specified time.
To Roll Back Your Broker to the Last Configuration Revision


Sign in to the Amazon MQ console.


From the broker list, choose the name of your broker (for example, MyBroker).


On the MyBroker page, choose Actions, Roll back to last configuration.



(Optional) To review the Current configuration or the Last configuration, on the Roll back to the last configuration page, in the Summary section, choose Edit for either configuration.


In the Schedule broker modifications section, choose whether to apply modifications During the next scheduled maintenance window or Immediately.
Important
Your broker will be offline while it is being rebooted.


Choose Apply.


Your configuration revision is applied to your broker at the specified time.