AWS OpsWorks Stacks Layer Reference
Every instance that AWS OpsWorks Stacks deploys must be a member of at least one layer, which defines an instance's role in the stack and controls the details of setting up and configuring the instance, installing packages, deploying applications, and so on. For more information about how to use the AWS OpsWorks Stacks to create and manage layers, see Layers.
Each layer description includes a list of the built-in recipes that AWS OpsWorks Stacks runs for each of the layer's lifecycle events. Those recipes are stored at https://github.com/aws/opsworks-cookbooks. Note that the lists include only those recipes that are run directly by AWS OpsWorks Stacks. Those recipes sometimes run dependent recipes, which are not listed. To see the complete list of recipes for a particular event, including dependent and custom recipes, examine the run list in the appropriate lifecycle event's Chef log.
Topics
 HAProxy Layer Reference
 HAProxy AWS OpsWorks Stacks Layer
 MySQL Layer Reference
 MySQL OpsWorks Layer
 Application Server Layers Reference
 Application Server Layers
 ECS Cluster Layer Reference
 Custom Layer Reference
 Other Layers Reference
 Other Layers
ECS Cluster Layer Reference
Note
This layer is available only for Linux-based stacks.
An ECS Cluster layer represents an Amazon Elastic Container Service (Amazon ECS) cluster and simplifies cluster management.
Short name: ecs-cluster
Compatibility: An Amazon ECS service layer is compatible only with custom layers
Open ports: ECS Cluster allows public access to port 22 (SSH)
Autoassign Elastic IP addresses: Off by default
Default EBS volume: No
Default security group: AWS-OpsWorks-ECS-Cluster
Configuration: To configure an ECS Cluster layer, you must specify the following:
 Whether to assign public IP addresses or Elastic IP addresses to the container instances
 The instance profile for the container instances 
Setup recipes:
  opsworks_initial_setup
 ssh_host_keys
 ssh_users
 mysql::client
 dependencies
 ebs
 opsworks_ganglia::client
 opsworks_ecs::setup
Configure recipes:
 opsworks_ganglia::configure-client
 ssh_users
 mysql::client
 agent_version
 opsworks_ecs::configure
Deploy recipes:
 deploy::default
 opsworks_ecs::deploy 
Undeploy recipes:
 opsworks_ecs::undeploy 
Shutdown recipes:
 opsworks_shutdown::default
 opsworks_ecs::shutdown
Installation:
 AWS OpsWorks Stacks uses the instance's package installer to install Docker to its default locations
 The Chef log for the Setup event notes whether the Amazon ECS agent was successfully installed. Otherwise, the logs provided by AWS OpsWorks Stacks do not include Amazon ECS error log information. For more information on how to handleAmazon ECS errors, see Amazon ECS Troubleshooting.