Step 6: Add a Launch Constraint to Assign an IAM Role
A launch constraint designates an IAM role that AWS Service Catalog assumes when an end user launches a product. For this step, you will add a launch constraint to the Linux Desktop product so that AWS Service Catalog can use the AWS resources that are part of the product's AWS CloudFormation template. This launch constraint will enable the end user to launch the product and, after it is launched, manage it as a provisioned product. For more information, see AWS Service Catalog Launch Constraints.
Without a launch constraint, you would need to grant additional IAM permissions to your end users before they could use the Linux Desktop product. For example, the ServiceCatalogEndUserAccess policy grants the minimum IAM permissions required to access the AWS Service Catalog end user console view. By using a launch constraint, you can keep your end users' IAM permissions to a minimum, which is an IAM best practice. For more information, see Grant least privilege in the IAM User Guide.
To add a launch constraint


Open the IAM console at https://console.aws.amazon.com/iam/.


In the navigation pane, choose Policies. Choose Create policy and do the following:


On the Create policy page, choose the JSON tab.


Copy the following example policy and paste it in Policy Document, replacing the placeholder JSON in the text field:
{
      "Version": "2012-10-17",
      "Statement": [
          {
              "Effect": "Allow",
              "Action": [
                  "cloudformation:CreateStack",
                  "cloudformation:DeleteStack",
                  "cloudformation:DescribeStackEvents",
                  "cloudformation:DescribeStacks",
                  "cloudformation:GetTemplateSummary",
                  "cloudformation:SetStackPolicy",
                  "cloudformation:ValidateTemplate",
                  "cloudformation:UpdateStack",
                  "ec2:*",
                  "s3:GetObject",
                  "servicecatalog:*",
                  "sns:*"
              ],
              "Resource": "*"
          }
      ]
  }


Choose Review policy.


For Policy Name, type linuxDesktopPolicy.


Choose Create policy.


In the navigation pane, choose Roles. Choose Create role and do the following:


For Select role type, choose AWS service and then choose Service Catalog. Select the Service Catalog use case and then choose Next: Permissions.


Search for the linuxDesktopPolicy policy and then select the checkbox.


Choose Next: Tags, and then Next: Review.


For Role name, type linuxDesktopLaunchRole.


Choose Create role.


Open the AWS Service Catalog console at https://console.aws.amazon.com/servicecatalog/.


Choose the All engineering tools portfolio.


On the portfolio details page, choose the Constraints tab, and then choose Create constraint.


For Product, choose Linux Desktop, and for Constraint type, choose Launch. Choose Continue.


On the Launch constraint page, choose Search IAM roles, choose linuxDesktopLaunchRole, and then choose Submit.

