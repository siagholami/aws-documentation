Amazon CloudWatch User Guide

*Copyright Â© 2020 Amazon Web Services, Inc. and/or its affiliates. All rights reserved.***

Amazon's trademarks and trade dress may not be used in 
     connection with any product or service that is not Amazon's, 
     in any manner that is likely to cause confusion among customers, 
     or in any manner that disparages or discredits Amazon. All other 
     trademarks not owned by Amazon are the property of their respective
     owners, who may or may not be affiliated with, connected to, or 
     sponsored by Amazon.

Contents

What Is Amazon CloudWatch?
How Amazon CloudWatch Works
Amazon CloudWatch Concepts
Amazon CloudWatch Resources
Getting Set Up
Getting Started with Amazon CloudWatch
See Key Metrics From All AWS Services
Focus on Metrics and Alarms in a Single AWS Service
Focus on Metrics and Alarms in a Resource Group
Using Amazon CloudWatch Dashboards
Creating a CloudWatch Dashboard
Cross-Account Cross-Region Dashboards
Creating and working with widgets on CloudWatch dashboards
Add or Remove a Graph from a CloudWatch Dashboard
Move or Resize a Graph on a CloudWatch Dashboard
Edit a Graph on a CloudWatch Dashboard
Graph Metrics Manually on a CloudWatch Dashboard
Rename a Graph on a CloudWatch Dashboard
Add or Remove a Text Widget from a CloudWatch Dashboard
Add an Alarm Widget to a CloudWatch Dashboard
Link and Unlink Graphs on a CloudWatch Dashboard


Sharing CloudWatch Dashboards
Use Live Data
Add a Dashboard to Your Favorites List
Change the Period Override Setting or Refresh Interval for the CloudWatch Dashboard
Change the Time Range or Time Zone Format of a CloudWatch Dashboard
Using Amazon CloudWatch Metrics
Viewing Available Metrics
Searching for Available Metrics
Getting Statistics for a Metric
Getting Statistics for a Specific Resource
Aggregating Statistics Across Resources
Aggregating Statistics by Auto Scaling Group
Aggregating Statistics by Amazon Machine Image (AMI)


Graphing Metrics
Graphing a Metric
Using Dynamic Labels
Modifying the Time Range or Time Zone Format for a Graph
Modifying the Y-Axis for a Graph
Creating an Alarm from a Metric on a Graph


Publishing Custom Metrics
Using Metric Math
Using Search Expressions in Graphs
CloudWatch Search Expression Syntax
CloudWatch Search Expression Examples
Creating a CloudWatch Graph with a Search Expression


Using Amazon CloudWatch Alarms
Setting Up Amazon SNS Notifications
Create a CloudWatch Alarm Based on a Static Threshold
Creating a CloudWatch Alarm Based on Anomaly Detection
Creating a CloudWatch Alarm Based on a Metric Math Expression
Creating a Composite Alarm
Editing or Deleting a CloudWatch Alarm
Creating a CPU Usage Alarm That Sends Email
Creating a Load Balancer Latency Alarm That Sends Email
Creating a Storage Throughput Alarm that Sends Email
Create Alarms to Stop, Terminate, Reboot, or Recover an Instance
Creating a Billing Alarm to Monitor Your Estimated AWS Charges
Hiding Amazon EC2 Auto Scaling Alarms
Using Synthetic Monitoring
Required Roles and Permissions for CloudWatch Canaries
Creating a Canary
Using Canary Blueprints
Canary Runtime Versions
Writing a Canary Script
Library Functions Available for Canary Scripts
Running a Canary on a VPC


Viewing Canary Statistics and Details
Editing or Deleting a Canary
Using ServiceLens to Monitor the Health of Your Applications
Deploying ServiceLens
Deploying AWS X-Ray
Integrating With CloudWatch Logs
Enabling Segment Metrics From X-Ray


Deploying the CloudWatch Agent and the X-Ray Daemon
Deploying the CloudWatch Agent and the X-Ray Daemon on Amazon ECS
Deploying the CloudWatch Agent and the X-Ray Daemon on Amazon EKS or Kubernetes
Deploying the CloudWatch Agent and the X-Ray Daemon on Amazon EC2




Using the Service Map in ServiceLens
Using the Traces View in ServiceLens
ServiceLens Troubleshooting
Cross-Account Cross-Region CloudWatch Console
Using CloudWatch Anomaly Detection
Using Contributor Insights to Analyze High-Cardinality Data
Creating a Contributor Insights Rule
Contributor Insights Rule Syntax
Contributor Insights Rule Examples
Viewing Contributor Insights Reports
Graphing Metrics Generated by Rules
Using Contributor Insights Built-In Rules
Using Container Insights
Setting Up Container Insights
Setting Up Container Insights on Amazon ECS
Setting Up Container Insights on Amazon ECS for Cluster- and Service-Level Metrics
Deploying the CloudWatch Agent to Collect EC2 Instance-Level Metrics on Amazon ECS


Setting Up Container Insights on Amazon EKS and Kubernetes
Verify Prerequisites
Quick Start Setup for Container Insights on Amazon EKS
Set Up the CloudWatch Agent to Collect Cluster Metrics
Set Up FluentD as a DaemonSet to Send Logs to CloudWatch Logs
(Optional) Set Up Amazon EKS Control Plane Logging
(Optional) Enable App Mesh Envoy Access Logs
Updating or Deleting Container Insights on Amazon EKS and Kubernetes
Updating the CloudWatch Agent Container Image
Deleting the CloudWatch Agent and FluentD for Container Insights






Viewing Container Insights Metrics
Metrics Collected by Container Insights
Amazon ECS Container Insights Metrics
Amazon EKS and Kubernetes Container Insights Metrics


Container Insights Performance Log Reference
Container Insights Performance Log Events for Amazon ECS
Container Insights Performance Log Events for Amazon EKS and Kubernetes
Relevant Fields in Performance Log Events for Amazon EKS and Kubernetes


Container Insights Prometheus Metrics Monitoring
Set up the CloudWatch Agent for Prometheus Metrics Collection
Install the CloudWatch Agent with Prometheus Metrics Collection on Amazon ECS clusters
Install the CloudWatch agent with Prometheus metrics collection on Amazon EKS and Kubernetes clusters
Configuring the CloudWatch Agent for Prometheus Monitoring
(Optional) Set Up Sample Containerized Workloads for Prometheus Metric Testing
(Optional) Set Up AWS App Mesh sample workload for Amazon EKS and Kubernetes
(Optional) Set Up NGINX with Sample Traffic on Amazon EKS and Kubernetes
(Optional) Set Up memcached with a Metric Exporter on Amazon EKS and Kubernetes
(Optional) Set Up Java/JMX sample workload on Amazon EKS and Kubernetes
(Optional) Set Up HAProxy with a Metric Exporter on Amazon EKS and Kubernetes
(Optional) Sample App Mesh Workload for Amazon ECS clusters
(Optional) Sample Java/JMX Workload for Amazon ECS clusters




Prometheus Metrics Collected by the CloudWatch Agent
Viewing Your Prometheus Metrics
Prometheus Metrics Troubleshooting


Troubleshooting Container Insights
Building Your Own CloudWatch Agent Docker Image
Deploying Other CloudWatch Agent Features in Your Containers
Collecting Metrics and Logs from Amazon EC2 Instances and On-Premises Servers with the CloudWatch Agent
Installing the CloudWatch Agent
Installing the CloudWatch Agent Using the Command Line
Download and Configure the CloudWatch Agent Using the Command Line
Create IAM Roles and Users for Use With CloudWatch Agent
Installing and Running the CloudWatch Agent on Your Servers


Installing the CloudWatch Agent Using AWS Systems Manager
Create IAM Roles and Users for Use with the CloudWatch Agent
Download and Configure the CloudWatch Agent
Installing the CloudWatch Agent on EC2 Instances Using Your Agent Configuration
Installing the CloudWatch Agent on On-Premises Servers


Installing the CloudWatch Agent Using AWS CloudFormation
Verifying the Signature of the CloudWatch Agent Package


Create the CloudWatch Agent Configuration File
Create the CloudWatch Agent Configuration File with the Wizard
Manually Create or Edit the CloudWatch Agent Configuration File
Collect Process Metrics with the procstat Plugin
Retrieve Custom Metrics with StatsD
Retrieve Custom Metrics with collectd




Metrics Collected by the CloudWatch Agent
Common Scenarios with the CloudWatch Agent
Troubleshooting the CloudWatch Agent
Amazon CloudWatch Application Insights
What Is Amazon CloudWatch Application Insights?
How Amazon CloudWatch Application Insights works
Get started with Amazon CloudWatch Application Insights
Access CloudWatch Application Insights
Prerequisites
IAM policy
Set up, configure, and manage your application for monitoring


Work with component configurations
Component configuration template fragment
Component configuration sections
Component configuration examples


Create and configure CloudWatch Application Insights monitoring using CloudFormation templates
Tutorial: Set up monitors for .NET applications using SQL Server
View and troubleshoot problems detected by Amazon CloudWatch Application Insights
Logs and metrics supported by Amazon CloudWatch Application Insights
AWS Services That Publish CloudWatch Metrics
Alarm Events and EventBridge
Ingesting High-Cardinality Logs and Generating Metrics with CloudWatch Embedded Metric Format
Generating Logs Using the Embedded Metric Format
Using the Client Libraries to Generate Embedded Metric Format Logs
Manually Generating Embedded Metric Format Logs
Specification: Embedded Metric Format
Using the PutLogEvents API to Send Manually-Created Embedded Metric Format Logs
Using the CloudWatch Agent to Send Embedded Metric Format Logs




Viewing Your Metrics and Logs in the Console
Monitor Applications Using AWS SDK Metrics
Metrics and Data Collected by AWS SDK Metrics for Enterprise Support
Set Up SDK Metrics
Configure the CloudWatch Agent for SDK Metrics
Set IAM Permissions for SDK Metrics


Service Quotas Integration and Usage Metrics
Visualizing Your Service Quotas and Setting Alarms
CloudWatch Usage Metrics
CloudWatch Tutorials
Scenario: Monitor Your Estimated Charges Using CloudWatch
Scenario: Publish Metrics to CloudWatch
Tagging Your Amazon CloudWatch Resources
Security in Amazon CloudWatch
Data Protection in Amazon CloudWatch
Identity and Access Management for Amazon CloudWatch
CloudWatch Dashboard Permissions Update
Overview of Managing Access Permissions to Your CloudWatch Resources
Using Identity-Based Policies (IAM Policies) for CloudWatch
Using Condition Keys to Limit Access to CloudWatch Namespaces
Using Service-Linked Roles for CloudWatch
Using Service-Linked Roles for CloudWatch Application Insights for .NET and SQL Server
Amazon CloudWatch Permissions Reference


Compliance Validation for Amazon CloudWatch
Resilience in Amazon CloudWatch
Infrastructure Security in Amazon CloudWatch
Using CloudWatch and CloudWatch Synthetics with Interface VPC Endpoints
Security Considerations for Synthetics Canaries
Logging Amazon CloudWatch API Calls with AWS CloudTrail
Grafana Integration
CloudWatch Service Quotas
Document History
