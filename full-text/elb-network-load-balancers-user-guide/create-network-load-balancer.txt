Create a Network Load Balancer
A load balancer takes requests from clients and distributes them across targets in a target group, such as EC2 instances.
Before you begin, ensure that the virtual private cloud (VPC) for your load balancer has at least one public subnet in each Availability Zone where you have targets.
To create a load balancer using the AWS CLI, see Tutorial: Create a Network Load Balancer using the AWS CLI.
To create a load balancer using the AWS Management Console, complete the following tasks.
Topics
 Step 1: Configure a load balancer and a listener
 Step 2: Configure a target group
 Step 3: Register targets with the target group
 Step 4: Create the load balancer
Step 1: Configure a load balancer and a listener
First, provide some basic configuration information for your load balancer, such as a name, a network, and one or more listeners. A listener is a process that checks for connection requests. It is configured with a protocol and a port for connections from clients to the load balancer. For more information about supported protocols and ports, see Listener configuration.
To configure your load balancer and listener


Open the Amazon EC2 console at https://console.aws.amazon.com/ec2/.


On the navigation pane, under LOAD BALANCING, choose Load Balancers.


Choose Create Load Balancer.


For Network Load Balancer, choose Create.


For Name, type a name for your load balancer. For example, my-nlb.


For Scheme, an internet-facing load balancer routes requests from clients over the internet to targets. An internal load balancer routes requests to targets using private IP addresses.


For Listeners, the default is a listener that accepts TCP traffic on port 80. You can keep the default listener settings, modify the protocol, or modify the port. Choose Add to add another listener.


For Availability Zones, select the VPC that you used for your EC2 instances. For each Availability Zone that you used to launch your EC2 instances, select an Availability Zone and then select the public subnet for that Availability Zone.


By default, AWS assigns an IPv4 address to each load balancer node from the subnet for its Availability Zone. Alternatively, if you create an internet-facing load balancer, you can select an Elastic IP address for each Availability Zone. This provides your load balancer with static IP addresses. If you create an internal load balancer, you can assign a private IP address from the IPv4 range of each subnet instead of letting AWS assign one.

Choose Next: Configure Routing.

Step 2: Configure a target group
You register targets, such as EC2 instances, with a target group. The target group that you configure in this step is used as the target group in the listener rule, which forwards requests to the target group. For more information, see Target groups for your Network Load Balancers.
To configure your target group


For Target group, keep the default, New target group.


For Name, type a name for the target group.


For Protocol, choose a protocol as follows:
    If the listener protocol is TCP, choose TCP or TCP_UDP.
    If the listener protocol is TLS, choose TCP or TLS.
    If the listener protocol is UDP, choose UDP or TCP_UDP.
    If the listener protocol is TCP_UDP, choose TCP_UDP.


(Optional) Set Port as needed.


For Target type, select instance to specify targets by instance ID or ip to specify targets by IP address. If the target group protocol is UDP or TCP_UDP, you must select instance.


For Health checks, keep the default health check settings.


Choose Next: Register Targets.


Step 3: Register targets with the target group
You can register EC2 instances as targets in a target group.
To register targets by instance ID


For Instances, select one or more instances.


Keep the default instance listener port or type a new one and choose Add to registered.


When you have finished registering instances, choose Next: Review.


To register targets by IP address


For each IP address to register, do the following:


For Network, if the IP address is from a subnet of the target group VPC, select the VPC. Otherwise, select Other private IP address.


For Availability Zone, select an Availability Zone or all. This determines whether the target receives traffic from the load balancer nodes in the specified Availability Zone only or from all enabled Availability Zones. This field is not displayed if you are registering IP addresses from the VPC. In this case, the Availability Zone is automatically detected.


For IP, type the address.


For Port, type the port.


Choose Add to list.


When you have finished adding IP addresses to the list, choose Next: Review.


Step 4: Create the load balancer
After creating your load balancer, you can verify that your EC2 instances have passed the initial health check and then test that the load balancer is sending traffic to your EC2 instances. When you are finished with your load balancer, you can delete it. For more information, see Delete a Network Load Balancer.
To create the load balancer


On the Review page, choose Create.


After the load balancer is created, choose Close.


On the navigation pane, under LOAD BALANCING, choose Target Groups.


Select the newly created target group.


Choose Targets and verify that your instances are ready. If the status of an instance is initial, it's probably because the instance is still in the process of being registered, or it has not passed the minimum number of health checks to be considered healthy. After the status of at least one instance is healthy, you can test your load balancer.

