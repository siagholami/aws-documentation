Step 3: Configure the Web Server
Update your IIS website's configuration to use the HTTPS certificate that you created at the end of the previous step. This will finish setting up your Windows web server software (IIS) for SSL/TLS offload with AWS CloudHSM.
If you used a self-signed certificate to sign your CSR, you must first import the self-signed certificate into the Windows Trusted Root Certification Authorities.
To import your self-signed certificate into the Windows Trusted Root Certification Authorities


If you haven't already done so, connect to your Windows server. For more information, see Connect to Your Instance in the Amazon EC2 User Guide for Windows Instances.


Copy your self-signed certificate to your Windows server.


On your Windows Server, open the Control Panel.


For Search Control Panel, type certificates. Then choose Manage computer certificates.


In the Certificates - Local Computer window, double-click Trusted Root Certification Authorities.


Right-click on Certificates and then choose All Tasks, Import.


In the Certificate Import Wizard, choose Next.


Choose Browse, then find and select your self-signed certificate. If you created your self-signed certificate by following the instructions in the previous step of this tutorial, your self-signed certificate is named SelfSignedCA.crt. Choose Open.


Choose Next.


For Certificate Store, choose Place all certificates in the following store. Then ensure that Trusted Root Certification Authorities is selected for Certificate store.


Choose Next and then choose Finish.


To update the IIS website's configuration


If you haven't already done so, connect to your Windows server. For more information, see Connect to Your Instance in the Amazon EC2 User Guide for Windows Instances.


Start the AWS CloudHSM client.


Copy your web server's signed certificate—the one that you created at the end of this tutorial's previous step—to your Windows server.


On your Windows Server, use the Windows certreq command to accept the signed certificate, as in the following example. Replace IISCert.crt with the name of the file that contains your web server's signed certificate.


C:\>certreq -accept IISCert.crt
           SDK Version: 2.03


On your Windows server, start Server Manager.


In the Server Manager dashboard, in the top right corner, choose Tools, Internet Information Services (IIS) Manager.


In the Internet Information Services (IIS) Manager window, double-click your server name. Then double-click Sites. Select your website.


Select SSL Settings. Then, on the right side of the window, choose Bindings.


In the Site Bindings window, choose Add.


For Type, choose https. For SSL certificate, choose the HTTPS certificate that you created at the end of this tutorial's previous step.
Note
If you encounter an error during this certificate binding, restart your server and retry this step.


Choose OK.


After you update your website's configuration, go to Step 4: Enable HTTPS Traffic and Verify the Certificate.