Amazon CloudFront Developer Guide

*Copyright Â© 2020 Amazon Web Services, Inc. and/or its affiliates. All rights reserved.***

Amazon's trademarks and trade dress may not be used in 
     connection with any product or service that is not Amazon's, 
     in any manner that is likely to cause confusion among customers, 
     or in any manner that disparages or discredits Amazon. All other 
     trademarks not owned by Amazon are the property of their respective
     owners, who may or may not be affiliated with, connected to, or 
     sponsored by Amazon.

Contents

What is Amazon CloudFront?
CloudFront use cases
How CloudFront delivers content
Locations and IP address ranges of CloudFront edge servers
Accessing CloudFront
How to get started with Amazon CloudFront
AWS Identity and Access Management
CloudFront pricing
Choosing the price class for a CloudFront distribution


Setting up Amazon CloudFront
Getting started with Amazon CloudFront
Getting started with a simple CloudFront distribution
Getting started with the AWS for WordPress plugin
Getting started with a secure static website
Working with distributions
Overview of distributions
Actions you can use with distributions
Required fields for creating and updating distributions


Creating, Updating, and Deleting Distributions
Steps for Creating a Distribution (Overview)
Creating a Distribution
Values That You Specify When You Create or Update a Distribution
Values That CloudFront Displays in the Console
Testing a Distribution
Updating a Distribution
Tagging Amazon CloudFront Distributions
Deleting a Distribution


Using Amazon S3 Origins, MediaPackage Channels, and Custom Origins for Web Distributions
Using Custom URLs for Files by Adding Alternate Domain Names (CNAMEs)
Using WebSocket with CloudFront Distributions
Working with policies
Controlling the cache key
Using the managed cache policies
Understanding the cache key


Controlling origin requests
Using the managed origin request policies


Using the CloudFront HTTP headers
Adding, Removing, or Replacing Content That CloudFront Distributes
Adding and Accessing Content That CloudFront Distributes
Updating Existing Content with a CloudFront Distribution
Removing Content so CloudFront Won't Distribute It
Customizing the URL Format for Files in CloudFront
Specifying a Default Root Object
Invalidating Files
Serving compressed files
Configuring Secure Access and Restricting Access to Content
Using HTTPS with CloudFront
Requiring HTTPS for Communication Between Viewers and CloudFront
Requiring HTTPS for Communication Between CloudFront and Your Custom Origin
Requiring HTTPS for Communication Between CloudFront and Your Amazon S3 Origin
Supported protocols and ciphers between viewers and CloudFront
Supported protocols and ciphers between CloudFront and the origin
Charges for HTTPS connections


Using Alternate Domain Names and HTTPS
Choosing How CloudFront Serves HTTPS Requests
Requirements for Using SSL/TLS Certificates with CloudFront
Quotas on Using SSL/TLS Certificates with CloudFront (HTTPS Between Viewers and CloudFront Only)
Configuring Alternate Domain Names and HTTPS
Determining the Size of the Public Key in an SSL/TLS Certificate
Increasing the Quotas for SSL/TLS Certificates
Rotating SSL/TLS Certificates
Reverting from a Custom SSL/TLS Certificate to the Default CloudFront Certificate
Switching from a Custom SSL/TLS Certificate with Dedicated IP Addresses to SNI


Serving Private Content with Signed URLs and Signed Cookies
Overview of Serving Private Content
Task List: Serving Private Content
Specifying the AWS Accounts That Can Create Signed URLs and Signed Cookies (Trusted Signers)
Choosing Between Signed URLs and Signed Cookies
Using Signed URLs
Creating a Signed URL Using a Canned Policy
Creating a Signed URL Using a Custom Policy


Using Signed Cookies
Setting Signed Cookies Using a Canned Policy
Setting Signed Cookies Using a Custom Policy


Using a Linux Command and OpenSSL for Base64-Encoding and Encryption
Code Examples for Creating a Signature for a Signed URL
Create a URL Signature Using Perl
Create a URL Signature Using PHP
Create a URL Signature Using C# and the .NET Framework
Create a URL Signature Using Java




Restricting Access to Amazon S3 Content by Using an Origin Access Identity
Using AWS WAF to Control Access to Your Content
Restricting the Geographic Distribution of Your Content
Using Field-Level Encryption to Help Protect Sensitive Data
Optimizing Content Caching and Availability
How Caching Works with CloudFront Edge Caches
Increasing the Proportion of Requests that Are Served from CloudFront Edge Caches (Cache Hit Ratio)
Optimizing High Availability with CloudFront Origin Failover
Managing How Long Content Stays in an Edge Cache (Expiration)
Caching Content Based on Query String Parameters
Caching Content Based on Cookies
Caching Content Based on Request Headers
Troubleshooting
Troubleshooting Distribution Issues
Troubleshooting Error Responses from Your Origin
HTTP 400 Status Code (Bad Request)
HTTP 500 Status Code (Lambda Execution Error)
HTTP 502 Status Code (Bad Gateway)
HTTP 502 Status Code (Lambda Validation Error)
HTTP 503 Status Code (Lambda Limit Exceeded)
HTTP 503 Status Code (Service Unavailable)
HTTP 504 Status Code (Gateway Timeout)


Load Testing CloudFront
Request and Response Behavior
Request and Response Behavior for Amazon S3 Origins
How CloudFront Processes HTTP and HTTPS Requests


Request and Response Behavior for Custom Origins
Request and Response Behavior for Origin Groups
Adding Custom Headers to Origin Requests
How CloudFront Processes Partial Requests for an Object (Range GETs)
How CloudFront Processes HTTP 3xx Status Codes from Your Origin
How CloudFront Processes and Caches HTTP 4xx and 5xx Status Codes from Your Origin
Generating Custom Error Responses
Creating a Custom Error Page for Specific HTTP Status Codes
Storing Objects and Custom Error Pages in Different Locations
Changing Response Codes Returned by CloudFront
Controlling How Long CloudFront Caches Errors
How CloudFront Responds When a Custom Error Page Is Unavailable
Pricing for Custom Error Pages
Configuring Error Response Behavior
Video on Demand and Live Streaming Video with CloudFront
Delivering Video on Demand (VOD) with CloudFront
Delivering Live Streaming Video with CloudFront and AWS Media Services
Working with RTMP Distributions
RTMP Distributions
How RTMP Distributions Work
Task List for Streaming Media Files Using RTMP
Creating an RTMP Distribution Using the CloudFront Console
Values that You Specify When You Create or Update an RTMP Distribution
Values that CloudFront Displays in the Console When You Create or Update an RTMP Distribution
Configuring the Media Player
Using an Amazon S3 Bucket as the Origin for an RTMP Distribution
Creating Multiple RTMP Distributions for an Origin Server
Restricting Access Using Crossdomain.xml
Error Codes for RTMP Distributions
Troubleshooting RTMP Distributions


Customizing Content at the Edge with Lambda@Edge
Get Started Creating and Using Lambda@Edge Functions
Tutorial: Creating a Simple Lambda@Edge Function


Setting IAM Permissions and Roles for Lambda@Edge
Writing and Creating a Lambda@Edge Function
Writing Functions for Lambda@Edge
Creating a Lambda@Edge Function in the Lambda Console
Editing a Lambda Function for Lambda@Edge
Creating Lambda Functions and CloudFront Triggers Programmatically


Adding Triggers for a Lambda@Edge Function
CloudFront Events That Can Trigger a Lambda Function
How to Decide Which CloudFront Event to Use to Trigger a Lambda Function
Adding Triggers by Using the Lambda Console
Adding Triggers by Using the CloudFront Console


Testing and Debugging Lambda@Edge Functions
CloudWatch Metrics and CloudWatch Logs for Lambda Functions
Deleting Lambda@Edge Functions and Replicas
Lambda@Edge Event Structure
Working with Requests and Responses
Using Lambda@Edge Functions with Origin Failover
Generating HTTP Responses in Request Triggers
Updating HTTP Responses in Origin-Response Triggers
Accessing the Request Body by Choosing the Include Body Option


Lambda@Edge Example Functions
Requirements and Restrictions on Lambda Functions
Reports, Metrics, and Logs
AWS Billing and Usage Reports for CloudFront
Interpreting Your AWS Bill and the AWS Usage Report for CloudFront


CloudFront Reports in the Console
CloudFront Cache Statistics Reports
CloudFront Popular Objects Report
CloudFront Top Referrers Report
CloudFront Usage Reports
CloudFront Viewers Reports


Monitoring CloudFront with Amazon CloudWatch
Viewing CloudFront and Lambda@Edge metrics
Setting alarms to receive notifications
Downloading data in CSV format
Getting metrics using the CloudWatch API


CloudFront logging
Configuring and Using Standard Logs (Access Logs)
Real-time logs
Using AWS CloudTrail to Capture Requests Sent to the CloudFront API


Tracking Configuration Changes with AWS Config
Security in Amazon CloudFront
Data Protection in Amazon CloudFront
Identity and Access Management in CloudFront
Overview of Managing Access Permissions to Your CloudFront Resources
Using Identity-Based Policies (IAM Policies) for CloudFront
CloudFront API Permissions: Actions, Resources, and Conditions Reference


Logging and Monitoring in Amazon CloudFront
Compliance Validation for Amazon CloudFront
Resilience in Amazon CloudFront
Infrastructure Security in Amazon CloudFront
Quotas
Amazon CloudFront Related Information
Document history
AWS glossary
