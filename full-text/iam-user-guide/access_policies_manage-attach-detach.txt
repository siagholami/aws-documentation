Adding and removing IAM identity permissions
You use policies to define the permissions for an identity (user, group, or role). You can add and remove permissions by attaching and detaching IAM policies for an identity using the AWS Management Console, the AWS Command Line Interface (AWS CLI), or the AWS API. You can also use policies to set permissions boundaries for only entities (users or roles) using the same methods. Permissions boundaries are an advanced AWS feature that control the maximum permissions that an entity can have.
Topics
 Terminology
 View identity activity
 Adding IAM identity permissions (console)
 Removing IAM identity permissions (console)
 Adding IAM policies (AWS CLI)
 Removing IAM policies (AWS CLI)
 Adding IAM policies (AWS API)
 Removing IAM policies (AWS API)
Terminology
When you associate permissions policies with identities (users, groups, and roles), terminology and procedures vary depending on whether you are working with a managed or inline policy:
 Attach – Used with managed policies. You attach a managed policy to an identity (a user, group, or role). Attaching a policy applies the permissions in the policy to the identity.
 Detach – Used with managed policies. You detach a managed policy from an IAM identity (a user, group, or role). Detaching a policy removes its permissions from the identity.
 Embed – Used with inline policies. You embed an inline policy in an identity (a user, group, or role). Embedding a policy applies the permissions in the policy to the identity. Because an inline policy is stored in the identity, it is embedded rather than attached, though the results are similar.
Note
You can embed an inline policy for a service-linked role only in the service that depends on the role. See the AWS documentation for your service to see whether it supports this feature.
 Delete – Used with inline policies. You delete an inline policy from an IAM identity (a user, group, or role). Deleting a policy removes its permissions from the identity.
Note
You can delete an inline policy for a service-linked role only in the service that depends on the role. See the AWS documentation for your service to see whether it supports this feature.
You can use the console, AWS CLI, or AWS API to perform any of these actions.
More information

For more information about the difference between managed and inline policies, see Managed policies and inline policies. 
For more information about permissions boundaries, see Permissions boundaries for IAM entities.
For general information about IAM policies, see Policies and permissions in IAM.
The number and size of IAM resources in an AWS account are limited. For more information, see IAM and STS quotas.

View identity activity
Before you change the permissions for an identity (user, group, or role), you should review their recent service-level activity. This is important because you don't want to remove access from a principal (person or application) who is using it. For more information about viewing last accessed information, see Refining permissions in AWS using last accessed information.
Adding IAM identity permissions (console)
You can use the AWS Management Console to add permissions to an identity (user, group, or role). To do this, attach managed policies that control permissions, or specify a policy that serves as a permissions boundary. You can also embed an inline policy.
To use a managed policy as a permissions policy for an identity (console)


Sign in to the AWS Management Console and open the IAM console at https://console.aws.amazon.com/iam/.


In the navigation pane, choose Policies. 


In the list of policies, select the check box next to the name of the policy to attach. You can use the Filter menu and the search box to filter the list of policies.


Choose Policy actions, and then choose Attach.


Select one or more identities to attach the policy to. You can use the Filter menu and the search box to filter the list of principal entities. After selecting the identities, choose Attach policy.


To use a managed policy to set a permissions boundary (console)


Sign in to the AWS Management Console and open the IAM console at https://console.aws.amazon.com/iam/.


In the navigation pane, choose Policies. 


In the list of policies, choose the name of the policy to set. You can use the Filter menu and the search box to filter the list of policies.


On the policy summary page, choose the Policy usage tab, and then, if necessary, open the Permissions boundaries section and choose Set boundary.


Select one or more users or roles on which to use the policy for a permissions boundary. You can use the Filter menu and the search box to filter the list of principal entities. After selecting the principals, choose Set boundaries.


To embed an inline policy for a user or role (console)


Sign in to the AWS Management Console and open the IAM console at https://console.aws.amazon.com/iam/.


In the navigation pane, choose Users or Roles.


In the list, choose the name of the user or role to embed a policy in.


Choose the Permissions tab. 


Scroll to the bottom of the page and choose Add inline policy.
Note
You cannot embed an inline policy in a service-linked role in IAM. Because the linked service defines whether you can modify the permissions of the role, you might be able to add additional policies from the service console, API, or AWS CLI. To view the service-linked role documentation for a service, see AWS services that work with IAM and choose Yes in the Service-Linked Role column for your service.


Choose from the following methods to view the steps required to create your policy:
    Importing existing managed policies – You can import a managed policy within your account and then edit the policy to customize it to your specific requirements. A managed policy can be an AWS managed policy or a customer managed policy that you created previously.
    Creating policies with the visual editor – You can construct a new policy from scratch in the visual editor. If you use the visual editor, you do not have to understand JSON syntax.
    Creating policies on the JSON tab – In the JSON tab, you can use JSON syntax to create a policy. You can type a new JSON policy document or paste an example policy.


After you create an inline policy, it is automatically embedded in your user or role.


To embed an inline policy for a group (console)


Sign in to the AWS Management Console and open the IAM console at https://console.aws.amazon.com/iam/.


In the navigation pane, choose Groups.


In the list, choose the name of the group to embed a policy in.


Choose the Permissions tab and expand the Inline Policies section if necessary.


Choose Create Group Policy. If there are no existing policies in Groups, instead choose click here to create your first inline policy.


Choose Policy Generator or Custom Policy, and then choose Select. 


Do one of the following:
    If you chose Custom Policy, specify a name for the policy and create your policy document. Policy Validator reports any syntax errors.
    If you are using the policy generator to create your policy, choose the appropriate Effect, AWS Service, and Actions options. Type the Amazon Resource Name (ARN) (if applicable), and add any conditions that you want to include. Then choose Add Statement. You can add as many statements as you want to the policy. When you are finished adding statements, choose Next Step. 


When you are satisfied with the policy, choose Apply Policy.


To change the permissions boundary for one or more entities (console)


Sign in to the AWS Management Console and open the IAM console at https://console.aws.amazon.com/iam/.


In the navigation pane, choose Policies. 


In the list of policies, choose the name of the policy to set. You can use the Filter menu and the search box to filter the list of policies.


On the policy summary page, choose the Policy usage tab, and then, if necessary, open the Permissions boundaries section. Select the check box next to the users or roles whose boundaries you want to change and then choose Change boundary.


Select a new policy to use for a permissions boundary. You can use the Filter menu and the search box to filter the list of policies. After selecting the policy, choose Change boundary.


Removing IAM identity permissions (console)
You can use the AWS Management Console to remove permissions from an identity (user, group, or role). To do this, detach managed policies that control permissions, or remove a policy that serves as a permissions boundary. You can also delete an inline policy.
To detach a managed policy used as a permissions policy (console)


Sign in to the AWS Management Console and open the IAM console at https://console.aws.amazon.com/iam/.


In the navigation pane, choose Policies. 


In the list of policies, select the check box next to the name of the policy to detach. You can use the Filter menu and the search box to filter the list of policies.


Choose Policy actions, and then choose Detach.


Select the identities to detach the policy from. You can use the Filter menu and the search box to filter the list of identities. After selecting the identities, choose Detach policy.


To remove a permissions boundary (console)


Sign in to the AWS Management Console and open the IAM console at https://console.aws.amazon.com/iam/.


In the navigation pane, choose Policies. 


In the list of policies, choose the name of the policy to set. You can use the Filter menu and the search box to filter the list of policies.


On the policy summary page, choose the Policy usage tab, and then, if necessary, open the Permissions boundaries section and choose Remove boundary.


Confirm that you want to remove the boundary and choose Remove.


To delete an inline policy (console)


Sign in to the AWS Management Console and open the IAM console at https://console.aws.amazon.com/iam/.


In the navigation pane, choose Groups, Users, or Roles.


In the list, choose the name of the group, user, or role that has the policy you want to remove.


Choose the Permissions tab. If you chose Groups, expand the Inline Policies section if necessary.


If in Groups, choose Remove Policy. If in Users or Roles, choose X.


Adding IAM policies (AWS CLI)
You can use the AWS CLI to add permissions to an identity (user, group, or role). To do this, attach managed policies that control permissions, or specify a policy that serves as a permissions boundary. You can also embed an inline policy.
To use a managed policy as a permissions policy for an entity (AWS CLI)


(Optional) To view information about a managed policy, run the following commands: 
    To list managed policies: aws iam list-policies
    To retrieve detailed information about a managed policy: get-policy


To attach a managed policy to an identity (user, group, or role), use one of the following commands: 
    aws iam attach-user-policy
    aws iam attach-group-policy
    aws iam attach-role-policy


To use a managed policy to set a permissions boundary (AWS CLI)


(Optional) To view information about a managed policy, run the following commands: 
    To list managed policies: aws iam list-policies
    To retrieve detailed information about a managed policy: aws iam get-policy


To use a managed policy to set the permissions boundary for an entity (user or role), use one of the following commands: 
    aws iam put-user-permissions-boundary
    aws iam put-role-permissions-boundary


To embed an inline policy (AWS CLI)
To embed an inline policy to an identity (user, group, or role that is not a service-linked role), use one of the following commands: 
 aws iam put-user-policy
 aws iam put-group-policy
 aws iam put-role-policy
Removing IAM policies (AWS CLI)
You can use the AWS CLI to detach managed policies that control permissions, or remove a policy that serves as a permissions boundary. You can also delete an inline policy.
To detach a managed policy used as a permissions policy (AWS CLI)


(Optional) To view information about a policy, run the following commands:
    To list managed policies: aws iam list-policies
    To retrieve detailed information about a managed policy: aws iam get-policy 


(Optional) To find out about the relationships between the policies and identities, run the following commands:
    To list the identities (users, groups, and roles) to which a managed policy is attached: 

aws iam list-entities-for-policy
To list the managed policies attached to an identity (a user, group, or role), use one of the following commands:
aws iam list-attached-user-policies
aws iam list-attached-group-policies
aws iam list-attached-role-policies



To detach a managed policy from an identity (user, group, or role), use one of the following commands:
    aws iam detach-user-policy
    aws iam detach-group-policy
    aws iam detach-role-policy


To remove a permissions boundary (AWS CLI)


(Optional) To view which managed policy is currently used to set the permissions boundary for a user or role, run the following commands:
    aws iam get-user
     aws iam get-role 


(Optional) To view the users or roles on which a managed policy is used for a permissions boundary, run the following command:
    aws iam list-entities-for-policy


(Optional) To view information about a managed policy, run the following commands:
    To list managed policies: aws iam list-policies
    To retrieve detailed information about a managed policy: aws iam get-policy 


To remove a permissions boundary from a user or role, use one of the following commands:
    aws iam delete-user-permissions-boundary
    aws iam delete-role-permissions-boundary


To delete an inline policy (AWS CLI)


(Optional) To list all inline policies that are attached to an identity (user, group, role), use one of the following commands:
    aws iam list-user-policies
    aws iam list-group-policies
    aws iam list-role-policies


(Optional) To retrieve an inline policy document that is embedded in an identity (user, group, or role), use one of the following commands:
    aws iam get-user-policy
    aws iam get-group-policy
    aws iam get-role-policy


To delete an inline policy from an identity (user, group, or role that is not a service-linked role), use one of the following commands:
    aws iam delete-user-policy
    aws iam delete-group-policy
    aws iam delete-role-policy


Adding IAM policies (AWS API)
You can use the AWS API to attach managed policies that control permissions or specify a policy that serves as a permissions boundary. You can also embed an inline policy.
To use a managed policy as a permissions policy for an entity (AWS API)


(Optional) To view information about a policy, call the following operations: 
    To list managed policies: ListPolicies 
    To retrieve detailed information about a managed policy: GetPolicy


To attach a managed policy to an identity (user, group, or role), call one of the following operations:
    AttachUserPolicy
    AttachGroupPolicy
    AttachRolePolicy


To use a managed policy to set a permissions boundary (AWS API)


(Optional) To view information about a managed policy, call the following operations: 
    To list managed policies: ListPolicies
    To retrieve detailed information about a managed policy: GetPolicy


To use a managed policy to set the permissions boundary for an entity (user or role), call one of the following operations: 
    PutUserPermissionsBoundary
    PutRolePermissionsBoundary


To embed an inline policy (AWS API)
To embed an inline policy in an identity (user, group, or role that is not a service-linked role), call one of the following operations:
 PutUserPolicy
 PutGroupPolicy
 PutRolePolicy
Removing IAM policies (AWS API)
You can use the AWS API to detach managed policies that control permissions or remove a policy that serves as a permissions boundary. You can also delete an inline policy.
To detach a managed policy used as a permissions policy (AWS API)


(Optional) To view information about a policy, call the following operations:
    To list managed policies: ListPolicies
    To retrieve detailed information about a managed policy: GetPolicy


(Optional) To find out about the relationships between the policies and identities, call the following operations:
    To list the identities (users, groups, and roles) to which a managed policy is attached:

ListEntitiesForPolicy
To list the managed policies attached to an identity (a user, group, or role), call one of the following operations:
ListAttachedUserPolicies
ListAttachedGroupPolicies
ListAttachedRolePolicies



To detach a managed policy from an identity (user, group, or role), call one of the following operations:
    DetachUserPolicy
    DetachGroupPolicy
    DetachRolePolicy


To remove a permissions boundary (AWS API)


(Optional) To view which managed policy is currently used to set the permissions boundary for a user or role, call the following operations:
    GetUser
    GetRole


(Optional) To view the users or roles on which a managed policy is used for a permissions boundary, call the following operation:
    ListEntitiesForPolicy


(Optional) To view information about a managed policy, call the following operations:
    To list managed policies: ListPolicies
    To retrieve detailed information about a managed policy: GetPolicy


To remove a permissions boundary from a user or role, call one of the following operations:
    DeleteUserPermissionsBoundary
    DeleteRolePermissionsBoundary


To delete an inline policy (AWS API)


(Optional) To list all inline policies that are attached to an identity (user, group, role), call one of the following operations:
    ListUserPolicies
    ListGroupPolicies
    ListRolePolicies


(Optional) To retrieve an inline policy document that is embedded in an identity (user, group, or role), call one of the following operations:
    GetUserPolicy
    GetGroupPolicy
    GetRolePolicy


To delete an inline policy from an identity (user, group, or role that is not a service-linked role), call one of the following operations:
    DeleteUserPolicy
    DeleteGroupPolicy
    DeleteRolePolicy

