Managing Lake Formation and Athena User Permissions
Lake Formation vends credentials to query Amazon S3 data stores that are registered with Lake Formation. If you previously used IAM policies to allow or deny permissions to read data locations in Amazon S3, you can use Lake Formation permissions instead. However, other IAM permissions are still required.
The following sections summarize the permissions required to use Athena to query data registered in Lake Formation. For more information, see Security in AWS Lake Formation in the AWS Lake Formation Developer Guide.
Topics
 Identity-Based Permissions For Lake Formation and Athena
 Amazon S3 Permissions For Athena Query Results Locations
 Athena Workgroup Memberships To Query History
 Lake Formation Permissions To Data
 IAM Permissions to Write to Amazon S3 Locations
 Permissions to Encrypted Data, Metadata, and Athena Query Results
 Resource-Based Permissions for Amazon S3 Buckets in External Accounts (Optional)
Identity-Based Permissions For Lake Formation and Athena
Anyone using Athena to query data registered with Lake Formation must have an IAM permissions policy that allows the lakeformation:GetDataAccess action. The AmazonAthenaFullAccess Managed Policy allows this action. If you use inline policies, be sure to update permissions policies to allow this action.
In Lake Formation, a data lake administrator has permissions to create metadata objects such as databases and tables, grant Lake Formation permissions to other users, and register new Amazon S3 locations. To register new locations, permissions to the service-linked role for Lake Formation are required. For more information, see Create a Data Lake Administrator and Service-Linked Role Permissions for Lake Formation in the AWS Lake Formation Developer Guide.
An Lake Formation user can use Athena to query databases, tables, table columns, and underlying Amazon S3 data stores based on Lake Formation permissions granted to them by data lake administrators. Users cannot create databases or tables, or register new Amazon S3 locations with Lake Formation. For more information, see Create a Data Lake User in the AWS Lake Formation Developer Guide.
In Athena, identity-based permissions policies, including those for Athena workgroups, still control access to Athena actions for AWS account users. In addition, federated access might be provided through the SAML-based authentication available with Athena drivers. For more information, see Using Workgroups to Control Query Access and Costs,  IAM Policies for Accessing Workgroups, and Enabling Federated Access to the Athena API.
For more information, see Granting Lake Formation Permissions in the AWS Lake Formation Developer Guide.
Amazon S3 Permissions For Athena Query Results Locations
The query results locations in Amazon S3 for Athena cannot be registered with Lake Formation. Lake Formation permissions do not limit access to these locations. Unless you limit access, Athena users can access query result files and metadata when they do not have Lake Formation permissions for the data. To avoid this, we recommend that you use workgroups to specify the location for query results and align workgroup membership with Lake Formation permissions. You can then use IAM permissions policies to limit access to query results locations. For more information about query results, see Working with Query Results, Output Files, and Query History.
Athena Workgroup Memberships To Query History
Athena query history exposes a list of saved queries and complete query strings. Unless you use workgroups to separate access to query histories, Athena users who are not authorized to query data in Lake Formation are able to view query strings run on that data, including column names, selection criteria, and so on. We recommend that you use workgroups to separate query histories, and align Athena workgroup membership with Lake Formation permissions to limit access. For more information, see Using Workgroups to Control Query Access and Costs.
Lake Formation Permissions To Data
In addition to the baseline permission to use Lake Formation, Athena users must have Lake Formation permissions to access resources that they query. These permissions are granted and managed by a Lake Formation administrator. For more information, see Security and Access Control to Metadata and Data in the AWS Lake Formation Developer Guide.
IAM Permissions to Write to Amazon S3 Locations
Lake Formation permissions to Amazon S3 do not include the ability to write to Amazon S3. Create Table As Statements (CTAS) require write access to the Amazon S3 location of tables. To run CTAS queries on data registered with Lake Formation, Athena users must have IAM permissions to write to the table Amazon S3 locations in addition to the appropriate Lake Formation permissions to read the data locations. For more information, see Creating a Table from Query Results (CTAS).
Permissions to Encrypted Data, Metadata, and Athena Query Results
Underlying source data in Amazon S3 and metadata in the Data Catalog that is registered with Lake Formation can be encrypted. There is no change to the way that Athena handles encryption of query results when using Athena to query data registered with Lake Formation. For more information, see Encrypting Query Results Stored in Amazon S3.
 Encrypting source data – SSE-S3 and CSE-KMS encryption of Amazon S3 data locations source data is supported. SSE-KMS encryption is not supported. Athena users who query encrypted Amazon S3 locations that are registered with Lake Formation need permissions to encrypt and decrypt data. For more information about requirements, see Permissions to Encrypted Data in Amazon S3. 
 Encrypting metadata – Encrypting metadata in the Data Catalog is supported. For principals using Athena, identity-based policies must allow the "kms:GenerateDataKey", "kms:Decrypt", and "kms:Encrypt" actions for the key used to encrypt metadata. For more information, see Encrypting Your Data Catalog in the AWS Glue Developer Guide and Access to Encrypted Metadata in the AWS Glue Data Catalog.
Resource-Based Permissions for Amazon S3 Buckets in External Accounts (Optional)
To query an Amazon S3 data location in a different account, a resource-based IAM policy (bucket policy) must allow access to the location. For more information, see Cross-account Access in Athena to Amazon S3 Buckets.
For information about accessing a Data Catalog in another account, see Cross-Account Data Catalog Access.