# Using Amazon Connect in a VDI environment<a name="using-ccp-vdi"></a>

Virtual Desktop Infrastructure \(VDI\) environments add another layer of complexity to your solution that warrants separate POC efforts and performance testing to optimize\. The Amazon Connect Contact Control Panel \(CCP\) can operate in thick, thin, and zero client VDI environments as any other WebRTC based browser application does, and the configuration/support/optimization is best handled by your VDI support team\. That being said, the following is a collection of considerations and best practices that have been helpful for our VDI\-based customers\.
+ **Location of your agents**—Ideally, there are as few hops as possible with the lowest round trip time between the location from which your agents use the CCP and the VDI host location\.
+ **Host location of your VDI solution**—Ideally, your VDI host location is on the same network segment as your agents, with as few hops as possible from both internal resources as well as an edge router\. You also want the lowest round\-trip time possible to both WebRTC and Amazon EC2 range endpoints\.
+ **Network**—Each hop that traffic goes through between endpoints increases the possibility of failure and adds opportunity to introduce latency\. VDI environments are particularly susceptible to call quality issues if the underlying route is not optimized or the pipe isn't either fast or wide enough\. While AWS Direct Connect can improve call quality from the edge router to AWS, it will not address internal routing issues\. You may need to upgrade or optimize your private LAN/WAN, or redirect to an external device to circumvent call audio issues\. In most scenarios, if this is required, the CCP is not the only application that is having issues\.
+ **Dedicated resources**—at the Network and desktop level are recommended to prevent an impact to available agent resources from activities, such as backups and large file transfers\. One way to prevent resource contention is by restricting the desktop access to Amazon Connect users who will be using their environment similarly, instead of sharing resources with other business units who may use those resources differently\.
+ **Using a soft phone with remote connections**—in VDI environments can cause impact to audio quality\. If your agents connect to a remote endpoint and operates in that environment, we recommend either rerouting audio to an external E\.164 endpoint or connecting the media through the local device and then signaling through the remote connection\. You can build a custom CCP with the Amazon Connect Streams API by creating a CCP with no media for call signaling\. This way, the media is handled on the local desktop using standard CCP, and the signaling and call controls are handled on the remote connection with the CCP with no media\. For more information about the streams API, see the GitHub repository at [https://github\.com/aws/amazon\-connect\-streams](https://github.com/aws/amazon-connect-streams)\.