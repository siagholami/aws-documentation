Track who deleted or listened to recordings
You need an AWS account to do these steps.
Set up logging


If you have multiple instances and buckets, look up the name of the Amazon S3 bucket for your instance. Go to the Amazon Connect console, choose the instance alias, and choose Data storage. 



Go to the Amazon S3 console.


Choose the Amazon S3 bucket where your recordings are stored.



Choose the Properties tab.


Choose Object-level logging and then choose View CloudTrail trails. 


It opens the AWS CloudTrail console. 


In the navigation menu, choose Trails and then choose the trail name. 


In the upper right corner, toggle Logging to ON, if it's not on already. 


Under Management events, choose the edit icon. To log only who deletes recordings, you set this to Write-only. To also log who listens to recordings, set to All. Choose Save.



Under CloudWatch Logs choose the edit icon. Either accept the default name for your log group (CloudTrail/DefaultLogGroup), or specify a new name. Choose Continue.



Choose Allow. You can now close the AWS CloudTrail console.


Find who deleted or listened to recordings


Go to the Amazon CloudWatch console.


Choose Create dashboard.



Enter a name, such as CloudTrail-logging.


On the Add to this dashboard dialog box, choose Query results. Choose Configure.


In the Select log groups, use the drop-down arrow to choose the log group for your instance, such as CloudTrail/DefaultLogGroup.


In the query box, delete the current query, and then copy and paste the one shown below instead. This query will find all API events where the recording was deleted: 


fields @timestamp, @message
                       | filter eventSource ='s3.amazonaws.com'
                       | filter eventName = 'DeleteObject'


In the time box, choose how far back you want to search.


Choose Run query.


It returns all of the events that are named DeleteObject.


Next to the event, choose the arrow. It expands to show you detailed information about the event, including the ID of the user who deleted the recording.



If a lot of records are returned, choose the Actions arrow, and then choose Download query results (CSV). The data is exported to Excel. From there you can format the spreadsheet so it's easier for you to search and see the names of the users who deleted recordings.


The following image shows what the @message column looks like in the CSV file.


If you're also logging who listened to recordings, update the query to search for the eventName GetBucketLocation.

fields @timestamp, @message
                       | filter eventSource ='s3.amazonaws.com'
                       | filter eventName = 'GetBucketLocation'
Tips
Mirroring CloudTrail logs to CloudWatch is useful but optional. Mirroring the CloudWatch log allows you to use CloudWatch Insight to search the events easily.
If you have a large contact center, you may not want to use object logging because it generates many logs that are stored in your Amazon S3 bucket.
Another option is to write an AWS Lambda function to process the CloudTrail events. You can also search the logs manually. 