# Enabling Access to a Private CA<a name="granting-ca-access"></a>

A private CA from ACM Private CA can be used to sign certificates by any user with the necessary permissions on the CA\. The CA owner can issue certificates or delegate the required permissions for issuing certificates to an AWS Identity and Access Management \(IAM\) user residing in the same AWS account\. A user residing in a different AWS account can also issue certificates if authorized by the CA owner through a [resource\-based policy](pca-rbp.md)\.

Authorized users, whether single\-account or cross\-account, have a choice of ACM Private CA or AWS Certificate Manager resources when issuing certificates\. Certificates issued by using the ACM Private CA [IssueCertificate](https://docs.aws.amazon.com/acm-pca/latest/APIReference/API_IssueCertificate.html) API or [issue\-certificate](https://docs.aws.amazon.com/cli/latest/reference/acm-pca/issue-certificate.html) CLI command are unmanaged, requiring manual installation on target devices and manual renewal when they expire\. Certificates issued by using the ACM console, the ACM [RequestCertificate](https://docs.aws.amazon.com/acm/latest/APIReference/API_RequestCertificate.html) API, or the [request\-certificate](https://docs.aws.amazon.com/cli/latest/reference/acm/request-certificate.html) CLI command are managed, allowing them to be installed easily in services integrated with ACM\. If the CA administrator permits it and the issuer's account has a [service\-linked role](https://docs.aws.amazon.com/acm/latest/userguide/acm-slr.html) in place for ACM, managed certificates are renewed automatically when they expire\.

## Create Single\-Account Permissions for an IAM User<a name="assign-permissions"></a>

When the CA administrator \(that is, the owner of the CA\) and the certificate issuer reside in a single AWS account, a best practice is to separate the issuer and administrator roles by creating an AWS Identity and Access Management \(IAM\) user with limited permissions\. For information about using IAM with ACM Private CA, along with example permissions, see [Understanding Resources, Ownership, and Permissions Policies](security-iam.md#understand-resource-ownership)\.

**Single\-Account Case 1: Issuing an unmanaged certificate**  
In this case, the account owner creates a private CA, and then creates an IAM user with permission to issue certificates signed by the private CA\. The IAM user issues a certificate using the ACM Private CA `IssueCertificate` API\.

![\[Issuing an unmanaged certificate\]](http://docs.aws.amazon.com/acm-pca/latest/userguide/images/ca_access_1_account_pca_api.png)

Certificates issued in this manner are unmanaged, which means that an administrator must export them and install them on devices where they are intended to be used\. They also must be manually renewed when they expire\. Issuing a certificate using this API requires a certificate signing request \(CSR\) and key pair generated outside of ACM Private CA by [OpenSSL](https://www.openssl.org/) or a similar program\. For more information, see the `IssueCertificate` [documentation](https://docs.aws.amazon.com/acm-pca/latest/APIReference/API_IssueCertificate.html)\.

**Single\-Account Case 2: Issuing a managed certificate through ACM**  
This second case involves APIs from both ACM and PCA\. The account owner creates a private CA and IAM user as before, and then [grants permission](PcaCreateCa.md#configure-acm-renewal) to the ACM service principal to renew automatically any certificates signed by this CA\. The IAM user again issues the certificate, but this time using the ACM `RequestCertificate` API, which handles CSR and key generation\. When the certificates expires, ACM automates the renewal workflow\.

![\[Issuing a managed certificate\]](http://docs.aws.amazon.com/acm-pca/latest/userguide/images/ca_access_1_account_acm_api.png)

The account owner has the option of granting renewal permission through the management console during or after CA creation, or using the PCA `CreatePermission` API\. The managed certificates created from this workflow are available for use on with AWS services that are integrated with ACM\.

The following section contains procedures for granting renewal permissions\.

### Assign Certificate Renewal Permissions to ACM<a name="PcaPermissions"></a>

With [managed renewal](https://docs.aws.amazon.com/acm/latest/userguide/managed-renewal.html) in AWS Certificate Manager \(ACM\), you can automate the certificate renewal process for both public and private certificates\. In order for ACM to automatically renew the certificates generated by a private CA, the ACM service principal must be given all possible permissions *by the CA itself*\. If these renewal permissions are not present for ACM, the CA's owner \(or an authorized representative\) must manually reissue each private certificate when it expires\.

**Important**  
These procedures for assigning renewal permissions apply only when the CA owner and the certificate issuer reside in the same AWS account\. For cross\-account scenarios, see [Attach a Policy for Cross\-Account Access](#attach-policy)\.

Renewal permissions can be delegated during [private CA creation](PcaCreateCa.md) or altered anytime after as long as the CA is in the `ACTIVE` state\.

You can manage private CA permissions from the [ACM Private CA Console](https://console.aws.amazon.com/acm-pca), the [AWS Command Line Interface \(AWS CLI\)](https://aws.amazon.com/cli/), or the [ACM Private CA API](https://docs.aws.amazon.com/acm-pca/latest/APIReference/):

**To assign private CA permissions to ACM \(console\)**

1. Sign in to your AWS account and open the ACM Private CA console at [https://console\.aws\.amazon\.com/acm\-pca/home](https://console.aws.amazon.com/acm-pca/home)\.

1. Choose **Private CAs**\.

1. Choose your private CA from the list\.

1. Choose the **Permission** tab\.

1. Select **Authorize ACM to use this CA for renewals**\.

1. Choose **Save**\.

**To manage ACM permissions in ACM Private CA \(AWS CLI\)**  
Use the [create\-permission](https://docs.aws.amazon.com/cli/latest/reference/acm-pca/create-permission.html) command to assign permissions to ACM\. You must assign the necessary permissions \(`IssueCertificate`, `GetCertificate`, and `ListPermissions`\) in order for ACM to automatically renew your certificates\.

```
aws acm-pca create-permission \
--certificate-authority-arn arn:aws:acm-pca:region:account:\
certificate-authority/12345678-1234-1234-1234-123456789012 \
--actions IssueCertificate, GetCertificate, ListPermissions \
--principal acm.amazonaws.com
```

Use the [list\-permissions](https://docs.aws.amazon.com/cli/latest/reference/acm-pca/list-permissions.html) command to list the permissions delegated by a CA\.

```
aws acm-pca list-permissions \
--certificate-authority-arn arn:aws:acm-pca:region:account:\
certificate-authority/123455678-1234-1234-1234-123456789012
```

Use the [delete\-permission](https://docs.aws.amazon.com/cli/latest/reference/acm-pca/delete-permission.html) command to revoke permissions assigned by a CA to an AWS service principal\.

```
aws acm-pca delete-permission \
--certificate-authority-arn arn:aws:acm-pca:region:account:\
certificate-authority/12345678-1234-1234-1234-123456789012 \
--principal acm.amazonaws.com
```

## Attach a Policy for Cross\-Account Access<a name="attach-policy"></a>

When the CA administrator and the certificate issuer reside in different AWS accounts, the CA administrator must share CA access\. This is accomplished by attaching a resource\-based policy to the CA\. The policy grants issuance permissions to a specific principal, which may be an AWS account owner, an IAM user, an AWS Organizations ID, or an organizational unit ID\. 

Sharing can be done in the management console using AWS Resource Access Manager \(RAM\), which is a standard method for sharing AWS resources across accounts\. When you share a CA resource in AWS RAM with a principal in another account, the required resource\-based policy is attached to the CA automatically\. For more information about RAM, see the [AWS RAM User Guide](https://docs.aws.amazon.com/ram/latest/userguide/)\.

Alternatively, the CA administrator can attach a policy to a CA manually\. This is done using the PCA APIs [PutPolicy](https://docs.aws.amazon.com/acm-pca/latest/APIReference/API_PutPolicy.html), [GetPolicy](https://docs.aws.amazon.com/acm-pca/latest/APIReference/API_GetPolicy.html), and [DeletePolicy](https://docs.aws.amazon.com/acm-pca/latest/APIReference/API_DeletePolicy.html), or the corresponding AWS CLI commands [put\-policy](https://docs.aws.amazon.com/cli/latest/reference/acm-pca/put-policy.html), [get\-policy](https://docs.aws.amazon.com/cli/latest/reference/acm-pca/get-policy.html), and [delete\-policy](https://docs.aws.amazon.com/cli/latest/reference/acm-pca/delete-policy.html)\.

**Cross\-Account Case 1: Issuing a managed certificate using the console**  
In this case, the CA administrator uses RAM to share CA access with another AWS account, enabling that account to issue managed ACM certificates\. The diagram shows that RAM can share the CA directly with the account, or indirectly through an AWS Organizations ID in which the account is a member\.

![\[Cross-account issuance with the console\]](http://docs.aws.amazon.com/acm-pca/latest/userguide/images/ca_access_2_accounts_console.png)

After RAM shares a resource through AWS Organizations, the recipient principal must accept the share for it to take effect\. The recipient can configure AWS Organizations to accept offered shares automatically\.

**Note**  
The recipient account is responsible for configuring auto\-renewal in ACM\. Typically, on the first occasion a shared CA is used, ACM installs a service\-linked role that enables it to make unattended certificate calls on ACM Private CA\. If this fails \(usually due to a missing permission\), certificates from the CA will not renew automatically, and only the ACM user can resolve the problem, not the CA administrator\. For more information, see [Using a Service Linked Role \(SLR\) with ACM](https://docs.aws.amazon.com/acm/latest/userguide/acm-slr.html)\.

**Cross\-Account Case 2: Issuing managed and unmanaged certificates using the API/CLI**  
This second case demonstrates the sharing and issuance options that are possible using the AWS Certificate Manager and ACM Private CA APIs\. All of these operations can also be carried out using the corresponding AWS CLI commands\.

![\[Cross-account issuance using the APIs\]](http://docs.aws.amazon.com/acm-pca/latest/userguide/images/ca_access_2_accounts_api_options.png)

Because the APIs are being used directly in this example, the certificate issuer has a choice of two APIs to issue a certificate\. The PCA API action `IssueCertificate` results in an unmanaged certificate that will not be automatically renewed and must be exported and manually installed\. The ACM API action [RequestCertificate](https://docs.aws.amazon.com/acm/latest/APIReference/API_RequestCertificate.html) results in a managed certificate that can be easily installed on ACM\-integrated services and renews automatically\. 

**Note**  
The recipient account is responsible for configuring auto\-renewal in ACM\. Typically, on the first occasion a shared CA is used, ACM installs a service\-linked role that allows I to make unattended certificate calls on ACM Private CA\. If this fails \(usually due to a missing permission\), certificates from the CA will not renew automatically, and only the ACM user can resolve the problem, not the CA administrator\. For more information, see [Using a Service Linked Role \(SLR\) with ACM](https://docs.aws.amazon.com/acm/latest/userguide/acm-slr.html)\.