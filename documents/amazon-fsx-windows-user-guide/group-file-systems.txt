Grouping Multiple File Systems with DFS Namespaces
Amazon FSx for Windows File Server supports the use of Microsoft's Distributed File System (DFS) Namespaces. You can use DFS Namespaces to group file shares on multiple file systems into one common folder structure (a namespace) that you use to access the entire file dataset. DFS Namespaces can help you to organize and unify access to your file shares across multiple file systems. DFS Namespaces can also help to scale file data storage beyond what each file system supports (64 TB) for large file datasetsâ€”up to hundreds of petabytes.
Setting Up DFS Namespaces for Grouping Multiple File Systems
You can use DFS Namespaces to group multiple file systems under a single namespace. In the example that follows, the domain-based namespace (example.com\corp) is created on two namespace servers, consolidating file shares stored on multiple Amazon FSx file systems (finance, marketing, sales, home_directories). This allows your users to access file shares using a common namespace. Given this, they don't need to specify file-system DNS names for each of the file systems hosting the file shares.
These steps guide you through creating a single namespace (example.com\corp) on two namespace servers. You also set up four file shares under the namespace, each transparently redirecting users to shares hosted on separate Amazon FSx file systems. 

To group multiple file systems into a common DFS namespace


If you don't already have DFS Namespace servers running, you can launch a pair of highly available DFS Namespace servers using the setup-DFSN-servers.template AWS CloudFormation template. For more information on creating an AWS CloudFormation stack, see Creating a Stack on the AWS CloudFormation Console in the AWS CloudFormation User Guide.


Connect to one of the DFS Namespace servers launched in the previous step as a user in the AWS Delegated Administrators group. For more information, see Connecting to Your Windows Instance in the Amazon EC2 User Guide for Windows Instances.


Access the DFS Management Console by opening. Open the Start menu and run dfsmgmt.msc. This opens the DFS Management GUI tool.


Choose Action then New Namespace, type in the computer name of the first DFS Namespace server you launched for Server and choose Next.


For Name, type in the namespace you're creating (for example, corp).


Choose Edit Settings and set the appropriate permissions based on your requirements. Choose Next.


Leave the default Domain-based namespace option selected, leave the Enable Windows Server 2008 mode option selected, and choose Next.
Note
Windows Server 2008 mode is the latest available option for Namespaces.


Review the namespace settings and choose Create.


With the newly created namespace selected under Namespaces in the navigation bar, choose Action then Add Namespace Server.


Type in the computer name of the second DFS Namespace server you launched for Namespace server.


Choose Edit Settings, set the appropriate permissions based on your requirements, and choose OK.


Open the context (right-click) menu for the namespace you just created, choose New Folder, type in the name of the folder (for example, finance for Name, and choose OK.


Type in the DNS name of the file share that you want the DFS Namespace folder to point to in UNC format (for example, \\fs-0123456789abcdef0.example.com\finance) for Path to folder target and choose OK.


If the share doesn't exist:


Choose Yes to create it.


From the Create Share dialog, choose Browse.


Choose an existing folder, or create a new folder under D$, and choose OK.


Set the appropriate share permissions, and choose OK.


From the New Folder dialog, choose OK. The new folder will be created under the namespace.


Repeat the last four steps for other folders you want to share under the same namespace.

