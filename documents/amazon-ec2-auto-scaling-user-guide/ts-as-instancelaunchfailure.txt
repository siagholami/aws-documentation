Troubleshooting Amazon EC2 Auto Scaling: EC2 Instance launch failures
This page provides information about your EC2 instances that fail to launch, potential causes, and the steps you can take to resolve the issues.
To retrieve an error message, see Retrieving an error message.
When your EC2 instances fail to launch, you might get one or more of the following error messages:
Topics
 The security group  does not exist. Launching EC2 instance failed.
 The key pair  does not exist. Launching EC2 instance failed.
 The requested configuration is currently not supported.
 AutoScalingGroup  not found.
 The requested Availability Zone is no longer supported. Please retry your request...
 Your requested instance type () is not supported in your requested Availability Zone ()...
 You are not subscribed to this service. Please see https://aws.amazon.com/.
 Invalid device name upload. Launching EC2 instance failed.
 Value () for parameter virtualName is invalid...
 EBS block device mappings not supported for instance-store AMIs.
 Placement groups may not be used with instances of type 'm1.large'. Launching EC2 instance failed.
 Client.InternalError: Client error on launch.
The security group  does not exist. Launching EC2 instance failed.

Cause: The security group specified in your launch configuration might have been deleted. 
Solution: 



Use the https://docs.aws.amazon.com/cli/latest/reference/ec2/describe-security-groups.html command to get the list of the security groups associated with your account.


From the list, select the security groups to use. To create a security group instead, use the https://docs.aws.amazon.com/cli/latest/reference/ec2/create-security-group.html command.


Create a new launch configuration.


Update your Auto Scaling group with the new launch configuration using the https://docs.aws.amazon.com/cli/latest/reference/autoscaling/update-auto-scaling-group.html command.


The key pair  does not exist. Launching EC2 instance failed.

Cause: The key pair that was used when launching the instance might have been deleted.
Solution: 



Use the https://docs.aws.amazon.com/cli/latest/reference/ec2/describe-key-pairs.html command to get the list of the key pairs available to you.


From the list, select the key pair to use. To create a key pair instead, use the https://docs.aws.amazon.com/cli/latest/reference/ec2/create-key-pair.html command.


Create a new launch configuration.


Update your Auto Scaling group with the new launch configuration using the https://docs.aws.amazon.com/cli/latest/reference/autoscaling/update-auto-scaling-group.html command.


The requested configuration is currently not supported.

Cause: Some options in your launch configuration might not be currently supported.
Solution: 



Create a new launch configuration.


Update your Auto Scaling group with the new launch configuration using the https://docs.aws.amazon.com/cli/latest/reference/autoscaling/update-auto-scaling-group.html command.


AutoScalingGroup  not found.

Cause: The Auto Scaling group might have been deleted.
Solution: Create a new Auto Scaling group.

The requested Availability Zone is no longer supported. Please retry your request...

Error message: The requested Availability Zone is no longer supported. Please retry your request by not specifying an Availability Zone or choosing . Launching EC2 instance failed.
Cause: The Availability Zone associated with your Auto Scaling group might not be currently available.
Solution: Update your Auto Scaling group with the recommendations in the error message. 

Your requested instance type () is not supported in your requested Availability Zone ()...

Error message: Your requested instance type () is not supported in your requested Availability Zone (). Please retry your request by not specifying an Availability Zone or choosing . Launching EC2 instance failed.
Cause: The instance type associated with your launch configuration might not be currently available in the Availability Zones specified in your Auto Scaling group. 
Solution: Update your Auto Scaling group with the recommendations in the error message.

You are not subscribed to this service. Please see https://aws.amazon.com/.

Cause: Your AWS account might have expired. 
Solution: Go to https://aws.amazon.com/ and choose Sign Up Now to open a new account. 

Invalid device name upload. Launching EC2 instance failed.

Cause: The block device mappings in your launch configuration might contain block device names that are not available or currently not supported. 
Solution: 



Use the https://docs.aws.amazon.com/cli/latest/reference/ec2/describe-volumes.html command to see how the volumes are exposed to the instance.


Create a new launch configuration using the device name listed in the volume description.


Update your Auto Scaling group with the new launch configuration using the https://docs.aws.amazon.com/cli/latest/reference/autoscaling/update-auto-scaling-group.html command.


Value () for parameter virtualName is invalid...

Error message: Value () for parameter virtualName is invalid. Expected format: 'ephemeralNUMBER'. Launching EC2 instance failed.
Cause: The format specified for the virtual name associated with the block device is incorrect. 
Solution:



Create a new launch configuration by specifying the device name in the virtualName parameter. For information about the device name format, see Device naming on Linux instances in the Amazon EC2 User Guide for Linux Instances.


Update your Auto Scaling group with the new launch configuration using the https://docs.aws.amazon.com/cli/latest/reference/autoscaling/update-auto-scaling-group.html command.


EBS block device mappings not supported for instance-store AMIs.

Cause: The block device mappings specified in the launch configuration are not supported on your instance. 
Solution:



Create a new launch configuration with block device mappings supported by your instance type. For more information, see Block device mapping in the Amazon EC2 User Guide for Linux Instances.


Update your Auto Scaling group with the new launch configuration using the https://docs.aws.amazon.com/cli/latest/reference/autoscaling/update-auto-scaling-group.html command.


Placement groups may not be used with instances of type 'm1.large'. Launching EC2 instance failed.

Cause: Your cluster placement group contains an invalid instance type. 
Solution: 



For information about valid instance types supported by the placement groups, see Placement groups in the Amazon EC2 User Guide for Linux Instances.


Follow the instructions detailed in the Placement groups to create a new placement group.


Alternatively, create a new launch configuration with the supported instance type. 


Update your Auto Scaling group with a new placement group or launch configuration using the https://docs.aws.amazon.com/cli/latest/reference/autoscaling/update-auto-scaling-group.html command.


Client.InternalError: Client error on launch.

Cause: This error can be caused when an Auto Scaling group attempts to launch an instance that has an encrypted EBS volume, but the service-linked role does not have access to the customer managed CMK used to encrypt it. For more information, see Required CMK key policy for use with encrypted volumes.
Solution: Additional setup is required to allow the Auto Scaling group to launch instances. The following table summarizes the steps for resolving the error. For more information, see https://forums.aws.amazon.com/thread.jspa?threadID=277523.




Scenario
Next steps




Scenario 1:  CMK and Auto Scaling group are in the same AWS account
Allow the service-linked role to use the CMK as follows: [See the AWS documentation website for more details]


Scenario 2: CMK and Auto Scaling group are in different AWS accounts
There are two possible solutions: Solution 1: Use a CMK in the same AWS account as the Auto Scaling group [See the AWS documentation website for more details] Solution 2: Continue to use the CMK in a different AWS account from the Auto Scaling group [See the AWS documentation website for more details]


