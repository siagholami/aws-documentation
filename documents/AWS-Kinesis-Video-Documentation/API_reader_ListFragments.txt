ListFragments
Returns a list of Fragment objects from the specified stream and timestamp range within the archived data.
Listing fragments is eventually consistent. This means that even if the producer receives an acknowledgment that a fragment is persisted, the result might not be returned immediately from a request to ListFragments. However, results are typically available in less than one second.
Note
You must first call the GetDataEndpoint API to get an endpoint. Then send the ListFragments requests to this endpoint using the --endpoint-url parameter. 
Important
If an error is thrown after invoking a Kinesis Video Streams archived media API, in addition to the HTTP status code and the response body, it includes the following pieces of information: 
x-amz-ErrorType HTTP header – contains a more specific error type in addition to what the HTTP status code provides. 
 x-amz-RequestId HTTP header – if you want to report an issue to AWS, the support team can better diagnose the problem if given the Request Id.
Both the HTTP status code and the ErrorType header can be utilized to make programmatic decisions about whether errors are retry-able and under what conditions, as well as provide information on what actions the client programmer might need to take in order to successfully try again.
For more information, see the Errors section at the bottom of this topic, as well as Common Errors. 
Request Syntax
```
POST /listFragments HTTP/1.1
Content-type: application/json
{
   "FragmentSelector": { 
      "FragmentSelectorType": "string",
      "TimestampRange": { 
         "EndTimestamp": number,
         "StartTimestamp": number
      }
   },
   "MaxResults": number,
   "NextToken": "string",
   "StreamName": "string"
}
```
URI Request Parameters
The request does not use any URI parameters.
Request Body
The request accepts the following data in JSON format.
 FragmentSelector  
Describes the timestamp range and timestamp origin for the range of fragments to return.
Type: FragmentSelector object
Required: No
 MaxResults  
The total number of fragments to return. If the total number of fragments available is more than the value specified in max-results, then a ListFragments:NextToken is provided in the output that you can use to resume pagination.
Type: Long
Valid Range: Minimum value of 1. Maximum value of 1000.
Required: No
 NextToken  
A token to specify where to start paginating. This is the ListFragments:NextToken from a previously truncated response.
Type: String
Length Constraints: Minimum length of 1. Maximum length of 4096.
Pattern: [a-zA-Z0-9/]={0,2} 
Required: No
 StreamName  
The name of the stream from which to retrieve a fragment list.
Type: String
Length Constraints: Minimum length of 1. Maximum length of 256.
Pattern: [a-zA-Z0-9_.-] 
Required: Yes
Response Syntax
```
HTTP/1.1 200
Content-type: application/json
{
   "Fragments": [ 
      { 
         "FragmentLengthInMilliseconds": number,
         "FragmentNumber": "string",
         "FragmentSizeInBytes": number,
         "ProducerTimestamp": number,
         "ServerTimestamp": number
      }
   ],
   "NextToken": "string"
}
```
Response Elements
If the action is successful, the service sends back an HTTP 200 response.
The following data is returned in JSON format by the service.
 Fragments  
A list of archived Fragment objects from the stream that meet the selector criteria. Results are in no specific order, even across pages.
Type: Array of Fragment objects
 NextToken  
If the returned list is truncated, the operation returns this token to use to retrieve the next page of results. This value is null when there are no more results to return.
Type: String
Length Constraints: Minimum length of 1. Maximum length of 4096.
Pattern: [a-zA-Z0-9/]={0,2} 
Errors
For information about the errors that are common to all actions, see Common Errors.
ClientLimitExceededException 
Kinesis Video Streams has throttled the request because you have exceeded the limit of allowed client calls. Try making the call later.
HTTP Status Code: 400
InvalidArgumentException 
A specified parameter exceeds its restrictions, is not supported, or can't be used.
HTTP Status Code: 400
NotAuthorizedException 
Status Code: 403, The caller is not authorized to perform an operation on the given stream, or the token has expired.
HTTP Status Code: 401
ResourceNotFoundException 
GetMedia throws this error when Kinesis Video Streams can't find the stream that you specified.
GetHLSStreamingSessionURL and GetDASHStreamingSessionURL throw this error if a session with a PlaybackMode of ON_DEMAND or LIVE_REPLAYis requested for a stream that has no fragments within the requested time range, or if a session with a PlaybackMode of LIVE is requested for a stream that has no fragments within the last 30 seconds.
HTTP Status Code: 404
See Also
For more information about using this API in one of the language-specific AWS SDKs, see the following:
  AWS Command Line Interface 
  AWS SDK for .NET 
  AWS SDK for C 
  AWS SDK for Go 
  AWS SDK for Java 
  AWS SDK for JavaScript 
  AWS SDK for PHP V3 
  AWS SDK for Python 
  AWS SDK for Ruby V3 