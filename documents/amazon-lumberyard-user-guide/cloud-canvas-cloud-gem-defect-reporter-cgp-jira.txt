Using Defect Reporter to Create Jira Tickets
You can use the Jira integration feature of the Defect Reporter cloud gem to create Jira tickets from defect reports. The integration feature uses AWS Lambda functions to receive the events and file tickets to your Jira server instance. To implement custom ticket filtering, you can modify the Lambda function in dedupping.main.
Prerequisites
This tutorial assumes the following:
 You used the Cloud Canvas Resource Manager or the lmbr_aws command line tool to create the following:
   A project stack for your project.
   A deployment for your project that has the CloudGemDefectReporter and CloudGemMetric cloud gems enabled.
For information on how to create a project stack and a deployment stack, see Tutorial: Getting Started with Cloud Canvas.
Enabling Jira Integration
Jira integration is not enabled by default. Use the Cloud Canvas lmbr_aws command line tool to create a deployment that has Jira enabled or to add Jira integration to an existing deployment.
To create a new deployment that has Jira integration
 Enter the following command:
lmbr_aws deployment create -d deployment_name --tags jira-integration
To add Jira integration to an existing deployment

Enter the following command:

lmbr_aws deployment tags -d deployment_name --add jira-integration


Use one of the following methods to update the stack:
    In Cloud Canvas Resource Manager, click Upload resources.

    In a command line prompt, enter the following:
lmbr_aws deployment update


Setting Jira Credentials
To use the Jira integration feature, you must set your Jira credentials in the Cloud Gem Portal.
To configure Jira credentials in the Cloud Gem Portal


Open the Cloud Gem Portal.


In the navigation pane, click Jira Credentials.



Enter a user name, password, and server address of your Jira instance (for example, https://jira.example.com).


Click Save. 


Jira credentials are stored as the environment variables of a Lambda function called JiraCredentialsLambda and encrypted by the AWS Key Management Service. When the Lambda function is invoked, these variables are decrypted and made available to the service Lambda function.

In the Cloud Gem Portal navigation pane, click Defect Reporter.


The Jira Integration tab now appears in the Cloud Gem Portal.

Configuring Jira Integration Settings
After you enable Jira integration, you can configure its settings in the Cloud Gem Portal.
To configure Jira integration settings

In the Cloud Gem Portal, click the Jira Integration tab.

In the Jira Integration Settings section, you can configure the Jira ticket submit mode, specify the Jira project for which tickets are created, and the default issue type.


For Submit Mode, choose Automatic or Manual.
    Automatic – Jira tickets are generated automatically when a defect report is submitted.
    Manual – Submit tickets manually in the Cloud Gem Portal. You can submit tickets individually or by group.

For more information, see Automatic and Manual Submit Modes.


For Project Key, choose a Jira project from the drop-down menu. The projects that are listed are defined on your Jira server instance.



For Issue Type, choose a Jira issue type from the drop-down menu (for example, Feedback or Bug). The available issue types depend on the project key that you specified. The issue type that you choose will be the default issue type for your Jira tickets.



Configuring Jira Field Mappings
You can use the Field Mappings section of the Jira Integration tab to configure the default mapping of game event attributes to Jira ticket fields. Required fields have an asterisk (*). Automatic mode fails when a required field does not have a specified mapping or default value. 

For example, you might map the annotation game event attribute to the Jira Description field and the platform_identifier attribute to the Jira Found in Platform field.
For Jira fields that do not map easily from game event attributes, enter custom default values or leave them blank to be entered by hand later. You do not have to provide default values for all fields. The field mapping settings apply to both manual and automatic modes.
To configure default Jira field mappings


For the fields for which you want to provide default values, enter your own text or type an initial letter, and then choose a game event attribute from the drop-down menu. The drop-down menu filters the available event attributes as you type.
Warning
If you do not specify a mapping or default value for a required field, automatic mode will fail.



For fields that have a plus () icon, click the icon to add an instance of the field. Click the minus icon (–) to remove an instance of the field.



When you are finished, click Save Settings.



Creating Jira Tickets Manually
You can create Jira tickets based on the defect reports that you have received.
To submit one or more Jira tickets from the Cloud Gem Portal


In the Cloud Gem Portal, on the Overview tab, select the reports for which you want to create a Jira ticket.



Choose Bulk Actions, and then click Create Jira Issue(s).



If you selected more than one defect report, choose a Report Grouping option.
    To create Jira tickets that use the same field mapping, choose Group.
    To create Jira tickets that allow a separate field mapping for each report, choose Individual.



In the Create Jira Ticket(s) dialog box, enter the information for the Jira ticket.



To fill in the fields in the dialog box, enter your own text or an initial letter and then choose a game event attribute from the drop-down menu. The drop-down menu filters the event attributes as you type.



If you want to change the fields that are available for mapping in the Create Jira Ticket(s) dialog box, click Change the default mappings here to open the Jira Integration tab. 

Note
If you change the default mappings at this point, the changes that you entered in the Create Jira Ticket(s) dialog box are not saved.


Click Create. The tickets appear on your Jira server, and you can easily link to them from the Cloud Gem Portal. For more information, see Viewing Jira Tickets.


Creating Individual Tickets Manually
You can create individual Jira tickets from a report's Report Detail page.
To create a Jira ticket for an individual report


In the Cloud Gem Portal, on the Overview tab, click the entry for the defect report.


On the Report Detail page, click Create Jira Issue.



In the Create Jira Ticket dialog box, enter the information for the ticket.



Click Submit.


Viewing Jira Tickets
After Jira tickets have been submitted, you can easily navigate to them from the Cloud Gem Portal.
To view a Jira ticket for a report


In the Cloud Gem Portal, on the Overview tab, click the entry for the defect report.


On the Report Detail page, do one of the following: 
    Click View Jira Issue.

    In the Report Information section, click the Jira Issue number.

Note
To open the Jira link, you might have to disable your web browser's pop-up blocker for the pages from your Jira server address.


Example
Consider the following example:
 A game has an event attribute called issue.
 Jira has a field called Description.
 On the Jira integration tab, you mapped the Jira Description field to the issue game event attribute.
 The game sends a defect event with the attribute issue.
 The attribute issue in the defect event has the value: "This is my defect event attribute called issue"
With this information, the Description field of the Jira ticket is automatically populated with the value of the game attribute, as illustrated by the following image.
