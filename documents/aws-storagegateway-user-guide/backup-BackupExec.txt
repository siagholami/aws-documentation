Testing Your Setup by Using Veritas Backup Exec
You can back up your data to virtual tapes, archive the tapes, and manage your virtual tape library (VTL) devices by using Veritas Backup Exec. In this topic, you can find basic documentation needed to perform backup and restore operations using the following versions of Backup Exec: 
 Veritas Backup Exec 2014
 Veritas Backup Exec 15
 Veritas Backup Exec 16
 Veritas Backup Exec 20.x
The procedure for using these versions of Backup Exec with a tape gateway is the same. See the Veritas support website for detailed information about how to use Backup Exec, including how to create secure backups with Backup Exec, software and hardware compatibility lists, and administrator guides for Backup Exec.
For more information about supported backup applications, see Supported third-party backup applications for a Tape Gateway.
Topics
 Configuring Storage in Backup Exec
 Importing a Tape in Backup Exec
 Writing Data to a Tape in Backup Exec
 Archiving a Tape Using Backup Exec
 Restoring Data from a Tape Archived in Backup Exec
 Disabling a Tape Drive in Backup Exec
Configuring Storage in Backup Exec
After you have connected the virtual tape library (VTL) devices to the Windows client, you configure Backup Exec storage to recognize your devices. For information about how to connect VTL devices to the Windows client, see Connecting Your VTL Devices.
To configure storage


Start the Backup Exec software, and then choose the yellow icon in top-left corner on the toolbar.


Choose Configuration and Settings, and then choose Backup Exec Services to open the Backup Exec Service Manager.



Choose Restart All Services. Backup Exec then recognizes the VTL devices (that is, the medium changer and tape drives). The restart process might take a few minutes.
Note
Tape Gateway provides 10 tape drives. However, your Backup Exec license agreement might require your backup application to work with fewer than 10 tape drives. In that case, you must disable tape drives in the Backup Exec robotic library to leave only the number of tape drives allowed by your license agreement enabled. For instructions, see Disabling a Tape Drive in Backup Exec .



After the restart is completed, close the Backup Exec Service Manager.


Importing a Tape in Backup Exec
You are now ready to import a tape from your gateway into a slot.


Choose the Storage tab, and then expand the Robotic library tree to display the VTL devices. 
Important
Veritas Backup Exec software requires the Tape Gateway medium changer type. If the medium changer type listed under Robotic library is not Tape Gateway, you must change it before you configure storage in the backup application. For information about how to select a different medium changer type, see Selecting a Medium Changer After Gateway Activation.



Choose the Slots icon to display all slots. 
Note
When you import tapes into the robotic library, the tapes are stored in slots instead of tape drives. Therefore, the tape drives might have a message that indicates there is no media in the drives (No media). When you initiate a backup or restore job, the tapes are moved into the tape drives.
You must have tapes available in your gateway tape library to import a tape into a storage slot. For instructions on how to create tapes, see Adding Virtual Tapes.


Open the context (right-click) menu for an empty slot, choose Import, and then choose Import media now. In the following screenshot, slot number 3 is empty. You can select more than one slot and import multiple tapes in a single import operation.



In the Media Request window that appears, choose View details. 



In the Action Alert: Media Intervention window, choose Respond OK to insert the media into the slot.



The tape appears in the slot you selected.
Note
Tapes that are imported include empty tapes and tapes that have been retrieved from the archive to the gateway.
Writing Data to a Tape in Backup Exec
You write data to a tape gateway virtual tape by using the same procedure and backup policies you do with physical tapes. For detailed information, see the Backup Exec Administrative Guide in the documentation section in the Backup Exec software.
Archiving a Tape Using Backup Exec
When you archive a tape, tape gateway moves the tape from your gatewayâ€™s virtual tape library (VTL) to the offline storage. You begin tape archival by exporting the tape using your Backup Exec software.
To archive your tape


Choose the Storage menu, choose Slots, open the context (right-click) menu for the slot you want to export the tape from, choose Export media, and then choose Export media now. You can select more than one slot and export multiple tapes in a single export operation.



In the Media Request pop-up window, choose View details, and then choose Respond OK in the Alert: Media Intervention window. 


In the AWS Storage Gateway console, you can verify the status of the tape you are archiving. It might take some time to finish uploading data to AWS. During this time, the exported tape is listed in the tape gateway's VTL with the status IN TRANSIT TO VTS. When the upload is completed and the archiving process begins, the status changes to ARCHIVING. When data archiving has completed, the exported tape is no longer listed in the VTL but is archived in GLACIER or DEEP_ARCHIVE.


Choose your gateway, and then choose VTL Tape Cartridges and verify that the virtual tape is no longer listed in your gateway. 


On the Navigation pane of the AWS Storage Gateway console, choose Tapes. Verify that your tapes status is ARCHIVED.


Restoring Data from a Tape Archived in Backup Exec
Restoring your archived data is a two-step process.
To restore data from an archived tape


Retrieve the archived tape to a tape gateway. For instructions, see Retrieving Archived Tapes.


Use Backup Exec to restore the data. This process is the same as restoring data from physical tapes. For instructions, see the Backup Exec Administrative Guide in the documentation section in the Backup Exec software.


Disabling a Tape Drive in Backup Exec
A tape gateway provides 10 tape drives, but you might decide to use fewer tape drives. In that case, you disable the tape drives you don't use.


Open Backup Exec, and choose the Storage tab.


In the Robotic library tree, open the context (right-click) menu for the tape drive you want to disable, and then choose Disable.


Next Step
Cleaning Up Resources You Don't Need