Using Your Tape Gateway
Following, you can find instructions about how to use your tape gateway.
Topics
 Connecting Your VTL Devices
 Using Your Backup Software to Test Your Gateway Setup
 Where Do I Go from Here?
Connecting Your VTL Devices
Following, you can find instructions about how to connect your virtual tape library (VTL) devices to your Microsoft Windows or Red Hat Enterprise Linux (RHEL) client.
Topics
 Connecting to a Microsoft Windows Client
 Connecting to a Linux Client
Connecting to a Microsoft Windows Client
The following procedure shows a summary of the steps that you follow to connect to a Windows client.
To connect your VTL devices to a Windows client


Start iscsicpl.exe.
Note
You must have administrator rights on the client computer to run the iSCSI initiator.


Start the Microsoft iSCSI initiator service.


In the iSCSI Initiator Properties dialog box, choose the Discovery tab, and then choose the Discover Portal button.


Provide the IP address of your tape gateway for IP address or DNS name.


Choose the Targets tab, and then choose Refresh. All 10 tape drives and the medium changer appear in the Discovered targets box. The status for the targets is Inactive.


Choose the first device and connect it. You connect the devices one at a time. 


Connect all of the targets.


On a Windows client, the driver provider for the tape drive must be Microsoft. Use the following procedure to verify the driver provider, and update the driver and provider if necessary:
To verify and update the driver and provider


On your Windows client, start Device Manager.


Expand Tape drives, open the context (right-click) menu for a tape drive, and choose Properties.


In the Driver tab of the Device Properties dialog box, verify Driver Provider is Microsoft.


If Driver Provider is not Microsoft, set the value as follows:


Choose Update Driver.


In the Update Driver Software dialog box, choose Browse my computer for driver software.


In the Update Driver Software dialog box, choose Let me pick from a list of device drivers on my computer.


Choose LTO Tape drive and choose Next. 


Choose Close to close the Update Driver Software window, and verify that the Driver Provider value is now set to Microsoft.


Repeat the steps to update driver and provider for all the tape drives.


Connecting to a Linux Client
The following procedure shows a summary of the steps that you follow to connect to an RHEL client.
To connect a Linux client to VTL devices

Install the iscsi-initiator-utils RPM package.

You can use the following command to install the package.
sudo yum install iscsi-initiator-utils

Make sure that the iSCSI daemon is running.

For RHEL 5 or 6, use the following command.
sudo /etc/init.d/iscsi status
For RHEL 7, use the following command.
sudo service iscsid status

Discover the volume or VTL device targets defined for a gateway. Use the following discovery command.

sudo /sbin/iscsiadm --mode discovery --type sendtargets --portal [GATEWAY_IP]:3260
The output of the discovery command looks like the following example output.
For volume gateways: [GATEWAY_IP]:3260, 1 iqn.1997-05.com.amazon:myvolume
For tape gateways: iqn.1997-05.com.amazon:[GATEWAY_IP]-tapedrive-01

Connect to a target. 

Make sure to specify the correct [GATEWAY_IP] and IQN in the connect command.
Use the following command.
sudo /sbin/iscsiadm --mode node --targetname iqn.1997-05.com.amazon:[ISCSI_TARGET_NAME] --portal [GATEWAY_IP]:3260,1 --login

Verify that the volume is attached to the client machine (the initiator). To do so, use the following command.

ls -l /dev/disk/by-path
The output of the command should look like the following example output.
lrwxrwxrwx. 1 root root 9 Apr 16 19:31 ip-[GATEWAY_IP]:3260-iscsi-iqn.1997-05.com.amazon:myvolume-lun-0 -> ../../sda
We highly recommend that after you set up your initiator you customize your iSCSI settings as discussed in Customizing Your Linux iSCSI Settings.
Next Step
Using Your Backup Software to Test Your Gateway Setup