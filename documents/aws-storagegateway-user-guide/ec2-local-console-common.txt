Performing Tasks on the Amazon EC2 Local Console (Volume and Tape Gateways)
Some maintenance tasks require that you log in to the local console when running a gateway deployed on an Amazon EC2 instance. In this section, you can find information about how to log in to the local console and perform maintenance tasks.
Topics
 Logging In to Your Amazon EC2 Gateway Local Console
 Routing Your Gateway Deployed on Amazon EC2 Through a Proxy
 Testing Your Gateway Connectivity to the Internet
 Running Storage Gateway Commands on the Local Console
 Viewing Your Gateway System Resource Status
Logging In to Your Amazon EC2 Gateway Local Console
You can connect to your Amazon EC2 instance by using a Secure Shell (SSH) client. For detailed information, see Connect to Your Instance in the Amazon EC2 User Guide. To connect this way, you will need the SSH key pair you specified when you launched the instance. For information about Amazon EC2 key pairs, see Amazon EC2 Key Pairs in the Amazon EC2 User Guide.
To log in to the gateway local console


Log in to your local console. If you are connecting to your EC2 instance from a Windows computer, log in as admin.


After you log in, you see the AWS Storage Gateway Configuration main menu, as shown in the following screenshot.
 
[See the AWS documentation website for more details]


To shut down the gateway, type 0. 
To exit the configuration session, type x to exit the menu. 
Routing Your Gateway Deployed on Amazon EC2 Through a Proxy
AWS Storage Gateway supports the configuration of a Socket Secure version 5 (SOCKS5) proxy between your gateway deployed on Amazon EC2 and AWS.
Note
The only proxy configuration AWS Storage Gateway supports is SOCKS5.
If your gateway must use a proxy server to communicate to the internet, then you need to configure the SOCKS proxy settings for your gateway. You do this by specifying an IP address and port number for the host running your proxy. After you do so, AWS Storage Gateway will route all HyperText Transfer Protocol Secure (HTTPS) traffic through your proxy server. 
To route your gateway internet traffic through a local proxy server


Log in to your gateway's local console. For instructions, see Logging In to Your Amazon EC2 Gateway Local Console.


On the AWS Storage Gateway Configuration main menu, type 1 to begin configuring the SOCKS proxy.



Choose one of the following options in the AWS Storage Gateway SOCKS Proxy Configuration menu:
 
[See the AWS documentation website for more details]


Testing Your Gateway Connectivity to the Internet
You can use your gateway's local console to test your Internet connection. This test can be useful when you are troubleshooting network issues with your gateway.
To test your gateway's connection to the internet


Log in to your gateway's local console. For instructions, see Logging In to Your Amazon EC2 Gateway Local Console.


In the AWS Storage Gateway Configuration main menu, type 2 to begin testing network connectivity.



The console displays the available regions. 

Select the region you want to test. For example, us-east-2. For supported AWS Regions and a list of AWS service endpoints you can use with Storage Gateway, see AWS Storage Gateway Endpoints and Quotas in the AWS General Reference.

Each endpoint in the region you select displays either a [PASSED] or [FAILED] message, as shown following.  
[See the AWS documentation website for more details]
Running Storage Gateway Commands on the Local Console
The AWS Storage Gateway console helps provide a secure environment for configuring and diagnosing issues with your gateway. Using the console commands, you can perform maintenance tasks such as saving routing tables or connecting to AWS Support. 
To run a configuration or diagnostic command


Log in to your gateway's local console. For instructions, see Logging In to Your Amazon EC2 Gateway Local Console.


In the AWS Storage Gateway Configuration main menu, type 3 for Gateway Console.



In the Storage Gateway console, type h, and then press the Return key.



The console displays the Available Commands menu with the available commands. After the menu, a Gateway Console prompt appears, as shown in the following screenshot.


To learn about a command, type man*  command name at the *Gateway Console prompt.

Viewing Your Gateway System Resource Status
When your gateway starts, it checks its virtual CPU cores, root volume size, and RAM and determines whether these system resources are sufficient for your gateway to function properly. You can view the results of this check on the gateway's local console.
To view the status of a system resource check


Log in to your gateway's local console. For instructions, see Logging In to Your Amazon EC2 Gateway Local Console.


In the AWS Storage Gateway Configuration main menu, type 4 to view the results of a system resource check.



The console displays an [OK], [WARNING], or [FAIL] message for each resource as described in the table following.  
[See the AWS documentation website for more details]
The console also displays the number of errors and warnings next to the resource check menu option.
The following screenshot shows a [FAIL] message and the accompanying error message.
