# Instance metrics<a name="health-enhanced-metrics"></a>

Instance metrics provide information about the health of instances in your environment\. The [Elastic Beanstalk health agent](health-enhanced.md#health-enhanced-agent) runs on each instance\. It gathers and relays metrics about instances to Elastic Beanstalk, which analyzes the metrics to determine the health of the instances in your environments\. 

The on\-instance Elastic Beanstalk health agent gathers metrics about instances from web servers and the operating system\. To get web server information on Linux\-based platforms, Elastic Beanstalk reads and parses web server logs\. On the Windows Server platform, Elastic Beanstalk receives this information directly from the IIS web server\. Web servers provide information about incoming HTTP requests: how many requests came in, how many resulted in errors, and how long they took to resolve\. The operating system provides snapshot information about the state of the instances' resources: the CPU load and distribution of time spent on each process type\.

The health agent gathers web server and operating system metrics and relays them to Elastic Beanstalk every 10 seconds\. Elastic Beanstalk analyzes the data and uses the results to update the health status for each instance and the environment\.

**Topics**
+ [Web server metrics](#health-enhanced-metrics-server)
+ [Operating system metrics](#health-enhanced-metrics-os)
+ [Web server metrics capture in IIS on Windows server](health-enhanced-metrics-server-iis.md)

## Web server metrics<a name="health-enhanced-metrics-server"></a>

On Linux\-based platforms, the Elastic Beanstalk health agent reads web server metrics from logs generated by the web container or server that processes requests on each instance in your environment\. Elastic Beanstalk platforms are configured to generate two logs: one in human\-readable format and one in machine\-readable format\. The health agent relays machine\-readable logs to Elastic Beanstalk every 10 seconds\.

For more information on the log format used by Elastic Beanstalk, see [Enhanced health log format](health-enhanced-serverlogs.md)\.

On the Windows Server platform, Elastic Beanstalk adds a module to the IIS web server's request pipeline and captures metrics about HTTP request times and response codes\. The module sends these metrics to the on\-instance health agent using a high\-performance interprocess communication \(IPC\) channel\. For implementation details, see [Web server metrics capture in IIS on Windows server](health-enhanced-metrics-server-iis.md)\.Reported Web Server Metrics

`RequestCount`  
Number of requests handled by the web server per second over the last 10 seconds\. Shown as an average `r/sec` \(requests per second\) in the EB CLI and [Environment health page](health-enhanced-console.md#health-enhanced-console-healthpage)\.

`Status2xx``Status3xx``Status4xx``Status5xx`  
Number of requests that resulted in each type of status code over the last 10 seconds\. For example, successful requests return a 200 OK, redirects are a 301, and a 404 is returned if the URL entered doesn't match any resources in the application\.  
The EB CLI and [Environment health page](health-enhanced-console.md#health-enhanced-console-healthpage) show these metrics both as a raw number of requests for instances, and as a percentage of overall requests for environments\.

`p99.9``p99``p95``p90``p85``p75``p50``p10`  
Average latency for the slowest *x* percent of requests over the last 10 seconds, where *x* is the difference between the number and 100\. For example, `p99 1.403` indicates the slowest 1% of requests over the last 10 seconds had an average latency of 1\.403 seconds\.

## Operating system metrics<a name="health-enhanced-metrics-os"></a>

The Elastic Beanstalk health agent reports the following operating system metrics\. Elastic Beanstalk uses these metrics to identify instances that are under sustained heavy load\. The metrics differ by operating system\.Reported operating system metrics—Linux

`Running`  
The amount of time that has passed since the instance was launched\.

`Load 1``Load 5`  
Load average in the last one\-minute and five\-minute periods\. Shown as a decimal value indicating the average number of processes running during that time\. If the number shown is higher than the number of vCPUs \(threads\) available, then the remainder is the average number of processes that were waiting\.  
For example, if your instance type has four vCPUs, and the load is 4\.5, there was an average of \.5 processes in wait during that time period, equivalent to one process waiting 50 percent of the time\.

`User %``Nice %``System %``Idle %``I/O Wait %`  
Percentage of time that the CPU has spent in each state over the last 10 seconds\.Reported operating system metrics—Windows

`Running`  
The amount of time that has passed since the instance was launched\.

`% User Time``% Privileged Time``% Idle Time`  
Percentage of time that the CPU has spent in each state over the last 10 seconds\.