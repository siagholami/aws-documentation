AWS Config Developer Guide

*Copyright Â© 2020 Amazon Web Services, Inc. and/or its affiliates. All rights reserved.***

Amazon's trademarks and trade dress may not be used in 
     connection with any product or service that is not Amazon's, 
     in any manner that is likely to cause confusion among customers, 
     or in any manner that disparages or discredits Amazon. All other 
     trademarks not owned by Amazon are the property of their respective
     owners, who may or may not be affiliated with, connected to, or 
     sponsored by Amazon.

Contents

What Is AWS Config?
Concepts
How AWS Config Works
Supported Resource Types
Service Limits
Getting Started with AWS Config
Setting Up AWS Config with the Console
Setting Up AWS Config with the AWS CLI
Prerequisites
Turning on AWS Config
Verify that AWS Config Is On


Setting Up AWS Config Rules with the Console
Viewing the AWS Config Dashboard
Viewing AWS Resource Configurations and Managing AWS Config
Components of a Configuration Item
Record Configurations for Third-Party Resources
Record and Delete a Configuration State for Third-Party Resources Using AWS CLI
Managing a Configuration State for Third-Party Resources Type Using APIs


Viewing AWS Resource Configurations and History
Looking Up Resources That Are Discovered by AWS Config
Viewing Configuration Details
Viewing Compliance History for Resources as Evaluated by AWS Config Rules
Delivering Configuration Snapshot to an Amazon S3 Bucket


Managing AWS Config
Managing the Delivery Channel
Updating the IAM Role Assigned to AWS Config
Managing the Configuration Recorder
Selecting Which Resources AWS Config Records
Recording Software Configuration for Managed Instances
Querying the Current Configuration State of AWS Resources
Query Using the SQL Query Editor (Console)
Query Using the SQL Query Editor AWS CLI
Example Queries
Example Relationship Queries
Query Components


Deleting AWS Config Data


Notifications that AWS Config Sends to an Amazon SNS topic
Example Configuration Item Change Notifications
Example Configuration History Delivery Notification
Example Configuration Snapshot Delivery Started Notification
Example Configuration Snapshot Delivery Notification
Example Compliance Change Notification
Example Rules Evaluation Started Notification
Example Oversized Configuration Item Change Notification
Example Delivery Failed Notification


Evaluating Resources with AWS Config Rules
Viewing Configuration Compliance
Specifying Triggers for AWS Config Rules
AWS Config Managed Rules
List of AWS Config Managed Rules
iam-inline-policy-blocked-kms-actions
iam-customer-policy-blocked-kms-actions
access-keys-rotated
account-part-of-organizations
acm-certificate-expiration-check
alb-http-drop-invalid-header-enabled
alb-http-to-https-redirection-check
alb-waf-enabled
api-gw-cache-enabled-and-encrypted
api-gw-endpoint-type-check
api-gw-execution-logging-enabled
approved-amis-by-id
approved-amis-by-tag
autoscaling-group-elb-healthcheck-required
cloudformation-stack-drift-detection-check
cloudformation-stack-notification-check
cloudfront-default-root-object-configured
cloudfront-origin-access-identity-enabled
cloudfront-origin-failover-enabled
cloudfront-sni-enabled
cloudfront-viewer-policy-https
cloud-trail-cloud-watch-logs-enabled
cloudtrail-enabled
cloud-trail-encryption-enabled
cloud-trail-log-file-validation-enabled
cloudtrail-s3-dataevents-enabled
cloudtrail-security-trail-enabled
cloudwatch-alarm-action-check
cloudwatch-alarm-resource-check
cloudwatch-alarm-settings-check
cloudwatch-log-group-encrypted
cmk-backing-key-rotation-enabled
codebuild-project-envvar-awscred-check
codebuild-project-source-repo-url-check
codepipeline-deployment-count-check
codepipeline-region-fanout-check
cw-loggroup-retention-period-check
dax-encryption-enabled
db-instance-backup-enabled
desired-instance-tenancy
desired-instance-type
dms-replication-not-public
dynamodb-autoscaling-enabled
dynamodb-in-backup-plan
dynamodb-pitr-enabled
dynamodb-table-encrypted-kms
dynamodb-table-encryption-enabled
dynamodb-throughput-limit-check
ebs-in-backup-plan
efs-in-backup-plan
ec2-ebs-encryption-by-default
ebs-optimized-instance
ebs-snapshot-public-restorable-check
ec2-instance-detailed-monitoring-enabled
ec2-instance-managed-by-systems-manager
ec2-instance-no-public-ip
ec2-instances-in-vpc
ec2-managedinstance-applications-blacklisted
ec2-managedinstance-applications-required
ec2-managedinstance-association-compliance-status-check
ec2-managedinstance-inventory-blacklisted
ec2-managedinstance-patch-compliance-status-check
ec2-managedinstance-platform-check
ec2-security-group-attached-to-eni
ec2-stopped-instance
ec2-volume-inuse-check
efs-encrypted-check
eip-attached
elasticsearch-encrypted-at-rest
elasticsearch-in-vpc-only
elasticache-redis-cluster-automatic-backup-check
ec2-imdsv2-check
eks-endpoint-no-public-access
eks-secrets-encrypted
elasticsearch-node-to-node-encryption-check
elb-cross-zone-load-balancing-enabled
elb-tls-https-listeners-only
elb-acm-certificate-required
elb-custom-security-policy-ssl-check
elb-deletion-protection-enabled
elb-logging-enabled
elb-predefined-security-policy-ssl-check
emr-kerberos-enabled
emr-master-no-public-ip
encrypted-volumes
fms-security-group-audit-policy-check
fms-security-group-content-check
fms-security-group-resource-association-check
fms-shield-resource-policy-check
fms-webacl-resource-policy-check
fms-webacl-rulegroup-association-check
guardduty-enabled-centralized
guardduty-non-archived-findings
iam-no-inline-policy-check
iam-group-has-users-check
iam-password-policy
iam-policy-blacklisted-check
iam-policy-in-use
iam-policy-no-statements-with-admin-access
iam-role-managed-policy-check
iam-root-access-key-check
iam-user-group-membership-check
iam-user-mfa-enabled
iam-user-no-policies-check
iam-user-unused-credentials-check
internet-gateway-authorized-vpc-only
kms-cmk-not-scheduled-for-deletion
lambda-concurrency-check
lambda-dlq-check
lambda-function-public-access-prohibited
lambda-function-settings-check
lambda-inside-vpc
mfa-enabled-for-iam-console-access
multi-region-cloudtrail-enabled
rds-cluster-deletion-protection-enabled
rds-instance-deletion-protection-enabled
rds-instance-iam-authentication-enabled
rds-logging-enabled
redshift-backup-enabled
rds-in-backup-plan
rds-snapshot-encrypted
redshift-require-tls-ssl
rds-enhanced-monitoring-enabled
rds-instance-public-access-check
rds-multi-az-support
rds-snapshots-public-prohibited
rds-storage-encrypted
redshift-cluster-configuration-check
redshift-cluster-maintenancesettings-check
redshift-cluster-public-access-check
required-tags
restricted-common-ports
restricted-ssh
root-account-hardware-mfa-enabled
root-account-mfa-enabled
s3-bucket-default-lock-enabled
s3-default-encryption-kms
securityhub-enabled
sns-encrypted-kms
s3-account-level-public-access-blocks
s3-bucket-blacklisted-actions-prohibited
s3-bucket-policy-not-more-permissive
s3-bucket-logging-enabled
s3-bucket-policy-grantee-check
s3-bucket-public-read-prohibited
s3-bucket-public-write-prohibited
s3-bucket-replication-enabled
s3-bucket-server-side-encryption-enabled
s3-bucket-ssl-requests-only
s3-bucket-versioning-enabled
sagemaker-endpoint-configuration-kms-key-configured
sagemaker-notebook-instance-kms-key-configured
sagemaker-notebook-no-direct-internet-access
secretsmanager-rotation-enabled-check
secretsmanager-scheduled-rotation-success-check
service-vpc-endpoint-enabled
shield-advanced-enabled-autorenew
shield-drt-access
vpc-default-security-group-closed
vpc-flow-logs-enabled
vpc-sg-open-only-to-authorized-ports
vpc-vpn-2-tunnels-up
waf-classic-logging-enabled
wafv2-logging-enabled


Working with AWS Config Managed Rules
Creating AWS Config Managed Rules With AWS CloudFormation Templates


AWS Config Custom Rules
Getting Started with Custom Rules for AWS Config
Developing a Custom Rule for AWS Config
Example AWS Lambda Functions and Events for AWS Config Rules
Example AWS Lambda Functions for AWS Config Rules (Node.js)
Example Events for AWS Config Rules




Managing your AWS Config Rules
Evaluating Your Resources
Deleting Evaluation Results
Enabling AWS Config Rules Across all Accounts in Your Organization
Remediating Noncompliant AWS Resources by AWS Config Rules
Tagging Your AWS Config Resources
Conformance Packs
Prerequisites
Conformance Pack Sample Templates
AWS Control Tower Detective Guardrails Conformance Pack
Operational Best Practices For Amazon DynamoDB
Operational Best Practices For Amazon S3
Operational Best Practices For AWS Identity And Access Management
Operational Best Practices for CIS
Operational Best Practices for NIST CSF
Operational Best Practices for PCI DSS 3.2.1
Example Templates with Remediation Action
Custom Conformance Pack


Deploying a Conformance Pack Using the AWS Config Console
Deploying a Conformance Pack Using the AWS Command Line Interface
Managing Conformance Packs (API)
Managing Conformance Packs Across all Accounts in Your Organization
Troubleshooting
Multi-Account Multi-Region Data Aggregation
Viewing Configuration and Compliance Data in the Aggregated View
Setting Up an Aggregator Using the Console
Setting Up an Aggregator Using the AWS Command Line Interface
Authorizing Aggregator Accounts to Collect AWS Config Configuration and Compliance Data Using the Console
Authorizing Aggregator Accounts to Collect AWS Config Configuration and Compliance Data Using the AWS Command Line Interface
Troubleshooting for Multi-Account Multi-Region Data Aggregation
Security in AWS Config
Data Protection in AWS Config
AWS Identity and Access Management
Granting Permissions for AWS Config Administration
Granting Custom Permissions for AWS Config Users
Supported Resource-Level Permissions for AWS Config Rules APIs Actions
Permissions for the IAM Role Assigned to AWS Config
Permissions for the Amazon S3 Bucket
Permissions for the Amazon SNS Topic
Service-Linked AWS Config Rules
Using Service-Linked Roles for AWS Config




Logging and Monitoring in AWS Config
Monitoring AWS Resource Changes with Amazon SQS
Monitoring AWS Config with Amazon CloudWatch Events


Using AWS Config with Interface Amazon VPC Endpoints
Incident Response in AWS Config
Compliance Validation for AWS Config
Resilience in AWS Config
Infrastructure Security in AWS Config
Security Best Practices for AWS Config
AWS Config Resources
Document History
AWS glossary
