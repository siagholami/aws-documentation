Configuring Multi-Channel Audio
NICE DCV supports up to 7.1 audio channels when using the NICE DCV native clients. The web browser clients supports stereo 2.0 audio channels only.
NICE DCV supports the following multi-channel audio configurations:
 Stereo 2.0 (2 channels)
 Quadriphonic 4.0 (4 channels)
 Surround 5.1 (6 channels)
 Surround 7.1 (8 channels)â€”Windows NICE DCV servers only

If the client requests a number of audio channels that is lower than the number of channels provided by the server, the server downmixes the number of channels to match the channels requested by the client. For example, if the client requests surround sound 5.1 while the server supports up to surround sound 7.1, the server automatically downmixes the audio to 5.1.
The server doesn't automatically downmix audio to match the audio output of the source application. For example, if the source application provides surround sound 7.1 while client supports only stereo 2.0, only the front-left and front-right audio channels are streamed to the client. The remaining channels are lost. In this case, you might need to configure the NICE DCV server to downmix the audio channels to prevent the loss of audio channels.
Topics
 Configuring the audio channels on Windows NICE DCV servers
 Configuring the audio channels on Linux NICE DCV servers
Configuring the audio channels on Windows NICE DCV servers
Windows servers support surround sound 7.1 (8 audio channels) by default. However, you can configure the server to use a different configuration.
Configuring the audio channels on Windows servers


Open the Windows Registry Editor.


Navigate to the HKEY_USERS/S-1-5-18/Software/GSettings/com/nicesoftware/dcv/audio/ key and select the source-channels parameter.


If there is no source-channels parameter in the registry key, create one:


In the left pane, open the context (right-click) menu for the audio key and choose New, DWORD (32-bit) value.


For Name, enter source-channels and press Enter.


Open the source-channels parameter. For Value data, enter one of the following: 2 for 2.0, 4 for 4.0, 6 for 5.1, or 8 for 7.1.


Choose OK and close the Windows Registry Editor.


Configuring the audio channels on Linux NICE DCV servers
Linux servers support stereo 2.0 (2 audio channels) by default and require some additional configuration to support multi-channel audio. 
You need to do the following:


Configure the PulseAudio sound server.


Configure the NICE DCV server to use the PulseAudio device.


Configure the number of channels to use.


To configure the PulseAudio sound server


Open /etc/pulse/default.pa with your preferred text editor. 


Add the following line to the end of the file.


load-module module-null-sink sink_name=dcv format=s16be channels=6 channel_map=front-left,front-right,rear-left,rear-right,front-center,lfe rate=48000 sink_properties="device.description='DCV Audio Speakers'"

Save and close the file.

After you have configured the PulseAudio sound server, you must configure the NICE DCV server to capture the audio from the PulseAudio sound server.
To configure the NICE DCV server to use the PulseAudio device

Retrieve the name of the PulseAudio device using the following command.

$ C:\> pacmd list-sources
The device name is listed in the device.description field.


Open /etc/dcv/dcv.conf with your preferred text editor.


Locate the grab-device parameter in the [audio] section and replace the existing value with the device name you retrieved in the previous step.


If there is no grab-device parameter in the [audio] section, add it manually using the following format:
[audio]
   grab-device="device_name"

Save and close the file.

After you have configured the NICE DCV server to capture the audio from the PulseAudio sound server, you can specify the number of channels to use.
To configure the number of channels to use


Open /etc/dcv/dcv.conf with your preferred text editor.


Locate the source-channels parameter in the [audio] section and replace the existing number of channels with one of the following: 2 for 2.0, 4 for 4.0, or 6 for 5.1.


If there is no source-channels parameter in the [audio] section, add it manually using the following format:
[audio]
   source-channels=channels


Save and close the file.


Stop and restart the NICE DCV server.

